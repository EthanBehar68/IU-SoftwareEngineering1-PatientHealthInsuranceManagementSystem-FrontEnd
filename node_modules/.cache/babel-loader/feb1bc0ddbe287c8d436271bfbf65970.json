{"ast":null,"code":"import _classCallCheck from\"/Users/jackjoliet/Documents/marketplace/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/jackjoliet/Documents/marketplace/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/jackjoliet/Documents/marketplace/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/jackjoliet/Documents/marketplace/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/Users/jackjoliet/Documents/marketplace/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/jackjoliet/Documents/marketplace/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component,Fragment}from'react';import{Switch,Route,withRouter,Redirect}from'react-router-dom';import{connect}from'react-redux';import IdleTimer from'react-idle-timer';import{Provider}from'react-redux';import{StripeProvider}from'react-stripe-elements';import{BrowserRouter as Router}from'react-router-dom';import{configureStore}from'../store';import jwt_decode from\"jwt-decode\";import setAuthToken from\"../utils/setAuthToken\";import{setCurrentAdmin,logoutAdmin}from\"../store/actions/adminauth\";import empty from'is-empty';import Main from'./Main';import'../css/overall.css';import'../css/navbar.css';import'../css/footer.css';import'../css/signin.css';import'../css/dashboard.css';import'../css/admin.css';import'../css/find.css';import'../css/detail.css';import'../css/react-confirm-alert.css';var store=configureStore();if(localStorage.jwtToken){// Set auth token header auth\nvar token=localStorage.jwtToken;setAuthToken(token);// Decode token and get user info and exp\nvar decoded=jwt_decode(token);if(decoded.db==\"admin\")store.dispatch(setCurrentAdmin(decoded));// Check for expired token\nvar currentTime=Date.now()/1000;// to get in milliseconds\nif(decoded.exp<currentTime){// Logout user\nstore.dispatch(logoutAdmin());// Redirect to login\nwindow.location.href=\"/\";}}var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);function App(props){var _this;_classCallCheck(this,App);_this=_possibleConstructorReturn(this,_getPrototypeOf(App).call(this,props));_this.idleTimer=null;_this.onIdle=_this._onIdle.bind(_assertThisInitialized(_this));_this.state={};return _this;}_createClass(App,[{key:\"_onIdle\",value:function _onIdle(e){if(!alert('You have been inactive for 10 minutes. Hit OK to get the latest data.')){window.location.reload();}}},{key:\"render\",value:function render(){var _this2=this;return React.createElement(Fragment,null,React.createElement(IdleTimer,{ref:function ref(_ref){_this2.idleTimer=_ref;},element:document,onIdle:this.onIdle,debounce:250,timeout:1000*10*60}),React.createElement(StripeProvider,{apiKey:\"pk_test_jzVfc9MR4WDKN9FVwaLZzj5N\"},React.createElement(Provider,{store:store},React.createElement(Router,null,React.createElement(\"div\",{className:\"content-wrap\"},React.createElement(Main,null))))));}}]);return App;}(Component);export default App;","map":{"version":3,"sources":["/Users/jackjoliet/Documents/marketplace/front/src/containers/App.js"],"names":["React","Component","Fragment","Switch","Route","withRouter","Redirect","connect","IdleTimer","Provider","StripeProvider","BrowserRouter","Router","configureStore","jwt_decode","setAuthToken","setCurrentAdmin","logoutAdmin","empty","Main","store","localStorage","jwtToken","token","decoded","db","dispatch","currentTime","Date","now","exp","window","location","href","App","props","idleTimer","onIdle","_onIdle","bind","state","e","alert","reload","ref","document"],"mappings":"s/BAAA,MAAOA,CAAAA,KAAP,EAAeC,SAAf,CAA0BC,QAA1B,KAAyC,OAAzC,CACA,OAAQC,MAAR,CAAgBC,KAAhB,CAAuBC,UAAvB,CAAmCC,QAAnC,KAAkD,kBAAlD,CACA,OAAQC,OAAR,KAAsB,aAAtB,CACA,MAAOC,CAAAA,SAAP,KAAsB,kBAAtB,CACA,OAAQC,QAAR,KAAuB,aAAvB,CACA,OAAQC,cAAR,KAA6B,uBAA7B,CACA,OAAQC,aAAa,GAAIC,CAAAA,MAAzB,KAAsC,kBAAtC,CACA,OAAQC,cAAR,KAA6B,UAA7B,CACA,MAAOC,CAAAA,UAAP,KAAuB,YAAvB,CACA,MAAOC,CAAAA,YAAP,KAAyB,uBAAzB,CACA,OAAQC,eAAR,CAAyBC,WAAzB,KAA2C,4BAA3C,CACA,MAAOC,CAAAA,KAAP,KAAkB,UAAlB,CAEA,MAAOC,CAAAA,IAAP,KAAiB,QAAjB,CAEA,MAAO,oBAAP,CACA,MAAO,mBAAP,CACA,MAAO,mBAAP,CACA,MAAO,mBAAP,CACA,MAAO,sBAAP,CACA,MAAO,kBAAP,CACA,MAAO,iBAAP,CACA,MAAO,mBAAP,CACA,MAAO,gCAAP,CAEA,GAAMC,CAAAA,KAAK,CAAGP,cAAc,EAA5B,CAEA,GAAGQ,YAAY,CAACC,QAAhB,CAA0B,CACxB;AACA,GAAMC,CAAAA,KAAK,CAAGF,YAAY,CAACC,QAA3B,CACAP,YAAY,CAACQ,KAAD,CAAZ,CACA;AACA,GAAMC,CAAAA,OAAO,CAAGV,UAAU,CAACS,KAAD,CAA1B,CACA,GAAGC,OAAO,CAACC,EAAR,EAAc,OAAjB,CAA0BL,KAAK,CAACM,QAAN,CAAeV,eAAe,CAACQ,OAAD,CAA9B,EAE5B;AACE,GAAMG,CAAAA,WAAW,CAAGC,IAAI,CAACC,GAAL,GAAa,IAAjC,CAAuC;AACvC,GAAIL,OAAO,CAACM,GAAR,CAAcH,WAAlB,CAA+B,CAC7B;AACAP,KAAK,CAACM,QAAN,CAAeT,WAAW,EAA1B,EACA;AACAc,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAuB,GAAvB,CACD,CACF,C,GAEKC,CAAAA,G,6DACJ,aAAYC,KAAZ,CAAmB,qCACjB,qEAAMA,KAAN,GACA,MAAKC,SAAL,CAAiB,IAAjB,CACA,MAAKC,MAAL,CAAc,MAAKC,OAAL,CAAaC,IAAb,+BAAd,CACA,MAAKC,KAAL,CAAa,EAAb,CAJiB,aAMlB,C,wDAEOC,C,CAAG,CACT,GAAG,CAACC,KAAK,CAAC,uEAAD,CAAT,CAAmF,CAACX,MAAM,CAACC,QAAP,CAAgBW,MAAhB,GAA0B,CAC/G,C,uCAEQ,iBACP,MACE,qBAAC,QAAD,MACE,oBAAC,SAAD,EACE,GAAG,CAAE,aAAAC,IAAG,CAAI,CAAE,MAAI,CAACR,SAAL,CAAiBQ,IAAjB,CAAsB,CADtC,CAEE,OAAO,CAAEC,QAFX,CAGE,MAAM,CAAE,KAAKR,MAHf,CAIE,QAAQ,CAAE,GAJZ,CAKE,OAAO,CAAE,KAAO,EAAP,CAAY,EALvB,EADF,CAQE,oBAAC,cAAD,EAAgB,MAAM,CAAC,kCAAvB,EACE,oBAAC,QAAD,EAAU,KAAK,CAAEjB,KAAjB,EACE,oBAAC,MAAD,MACE,2BAAK,SAAS,CAAC,cAAf,EACE,oBAAC,IAAD,MADF,CADF,CADF,CADF,CARF,CADF,CAoBD,C,iBAlCenB,S,EAqClB,cAAeiC,CAAAA,GAAf","sourcesContent":["import React, {Component, Fragment} from 'react';\nimport {Switch, Route, withRouter, Redirect} from 'react-router-dom';\nimport {connect} from 'react-redux';\nimport IdleTimer from 'react-idle-timer';\nimport {Provider} from 'react-redux';\nimport {StripeProvider} from 'react-stripe-elements';\nimport {BrowserRouter as Router} from 'react-router-dom';\nimport {configureStore} from '../store';\nimport jwt_decode from \"jwt-decode\";\nimport setAuthToken from \"../utils/setAuthToken\";\nimport {setCurrentAdmin, logoutAdmin} from \"../store/actions/adminauth\";\nimport empty from 'is-empty';\n\nimport Main from './Main';\n\nimport '../css/overall.css';\nimport '../css/navbar.css';\nimport '../css/footer.css';\nimport '../css/signin.css';\nimport '../css/dashboard.css';\nimport '../css/admin.css';\nimport '../css/find.css';\nimport '../css/detail.css';\nimport '../css/react-confirm-alert.css';\n\nconst store = configureStore();\n\nif(localStorage.jwtToken) {\n  // Set auth token header auth\n  const token = localStorage.jwtToken;\n  setAuthToken(token);\n  // Decode token and get user info and exp\n  const decoded = jwt_decode(token);\n  if(decoded.db == \"admin\") store.dispatch(setCurrentAdmin(decoded));\n\n// Check for expired token\n  const currentTime = Date.now() / 1000; // to get in milliseconds\n  if (decoded.exp < currentTime) {\n    // Logout user\n    store.dispatch(logoutAdmin());\n    // Redirect to login\n    window.location.href = \"/\";\n  }\n}\n\nclass App extends Component {\n  constructor(props) {\n    super(props)\n    this.idleTimer = null;\n    this.onIdle = this._onIdle.bind(this);\n    this.state = {\n    };\n  }\n \n  _onIdle(e) {\n    if(!alert('You have been inactive for 10 minutes. Hit OK to get the latest data.')){window.location.reload();}\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <IdleTimer\n          ref={ref => { this.idleTimer = ref }}\n          element={document}\n          onIdle={this.onIdle}\n          debounce={250}\n          timeout={1000 * 10 * 60} \n        />\n        <StripeProvider apiKey=\"pk_test_jzVfc9MR4WDKN9FVwaLZzj5N\">\n          <Provider store={store}>\n            <Router>\n              <div className=\"content-wrap\">\n                <Main />\n              </div>\n            </Router>\n          </Provider>\n        </StripeProvider>\n      </Fragment>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}