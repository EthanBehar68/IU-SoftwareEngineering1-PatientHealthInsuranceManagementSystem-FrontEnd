{"ast":null,"code":"import _objectSpread from \"/Users/jackjoliet/Documents/marketplace/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport { SET_CURRENT_USER, GET_ADMIN_DATA, UPDATE_ADMIN_DATA } from \"../types\";\nimport empty from 'is-empty';\nimport { saveAs } from 'file-saver';\nimport { apiCall } from '../../services/api';\nimport { flatten } from 'flat';\nexport const state_get_admin = payload => ({\n  type: SET_CURRENT_USER,\n  payload\n});\nexport const state_get_admin_data = payload => ({\n  type: GET_ADMIN_DATA,\n  payload\n});\nexport const state_update_admin_data = payload => ({\n  type: UPDATE_ADMIN_DATA,\n  payload\n});\nexport const db_get_admin = user => dispatch => {\n  return apiCall('get', `/api/admin/${user.id}`).then(function (res) {\n    dispatch(state_get_admin(_objectSpread({}, user, {}, res[0])));\n    return {\n      complete: true\n    };\n  }).catch(function (err) {\n    return {\n      complete: false,\n      message: err\n    };\n  });\n};\nexport const db_admin_get_products = data => dispatch => {\n  return apiCall('post', `/api/admin/products`, data).then(function (res) {\n    dispatch(state_get_admin_data(res));\n    return {\n      complete: true\n    };\n  }).catch(function (err) {\n    return {\n      complete: false,\n      message: err\n    };\n  });\n};\nexport const db_add_product = product => dispatch => {\n  return apiCall('post', `/api/admin/product/add`, _objectSpread({}, product, {\n    price: product.price * 100\n  })).then(function (res) {\n    dispatch(db_admin_get_products({\n      page: 1,\n      amount: 25\n    }));\n    return {\n      complete: true\n    };\n  }).catch(function (err) {\n    return {\n      complete: false,\n      message: err\n    };\n  });\n};\nexport const db_admin_get_orders = data => dispatch => {\n  return apiCall('post', `/api/admin/workers`, data).then(function (res) {\n    dispatch(state_get_admin_data(res));\n    return {\n      complete: true\n    };\n  }).catch(function (err) {\n    return {\n      complete: false,\n      message: err\n    };\n  });\n};\nexport const db_get_export_file = file_name => dispatch => {\n  return apiCall('get', `/api/admin/export`, {\n    responseType: 'blob'\n  }).then(function (res) {\n    saveAs(res, `${file_name}.xlsx`);\n    return {\n      complete: true\n    };\n  }).catch(function (err) {\n    console.log(err);\n    return {\n      complete: false,\n      message: err\n    };\n  });\n};\nexport const db_export_table = (table, location, file_name) => dispatch => {\n  return apiCall('post', `/api/admin/export`, {\n    table: table,\n    location: location\n  }).then(function (res) {\n    dispatch(db_get_export_file(file_name));\n    return {\n      complete: true\n    };\n  }).catch(function (err) {\n    return {\n      complete: false,\n      message: err\n    };\n  });\n};\nexport const db_update_product_active = data => dispatch => {\n  return apiCall('put', `/api/admin/product/status`, data).then(function (res) {\n    dispatch(state_update_admin_data(data));\n    return {\n      complete: true\n    };\n  }).catch(function (error) {\n    return {\n      complete: false,\n      message: error.data.error\n    };\n  });\n};","map":{"version":3,"sources":["/Users/jackjoliet/Documents/marketplace/front/src/store/actions/admin.js"],"names":["SET_CURRENT_USER","GET_ADMIN_DATA","UPDATE_ADMIN_DATA","empty","saveAs","apiCall","flatten","state_get_admin","payload","type","state_get_admin_data","state_update_admin_data","db_get_admin","user","dispatch","id","then","res","complete","catch","err","message","db_admin_get_products","data","db_add_product","product","price","page","amount","db_admin_get_orders","db_get_export_file","file_name","responseType","console","log","db_export_table","table","location","db_update_product_active","error"],"mappings":"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","sourcesContent":["import {SET_CURRENT_USER, GET_ADMIN_DATA, UPDATE_ADMIN_DATA} from \"../types\";\nimport empty from 'is-empty';\nimport {saveAs} from 'file-saver';\nimport {apiCall} from '../../services/api';\nimport {flatten} from 'flat';\n\nexport const state_get_admin = payload => ({\n\ttype: SET_CURRENT_USER,\n\tpayload\n});\n\nexport const state_get_admin_data = payload => ({\n\ttype: GET_ADMIN_DATA,\n\tpayload\n});\n\nexport const state_update_admin_data = payload => ({\n\ttype: UPDATE_ADMIN_DATA,\n\tpayload\n});\n\nexport const db_get_admin = user => dispatch => {\n\treturn apiCall('get', `/api/admin/${user.id}`)\n\t.then(function(res) {\n\t\tdispatch(state_get_admin({...user, ...res[0]}));\n\t\treturn {complete: true};\n\t})\n\t.catch(function(err) {\n\t\treturn {complete: false, message: err};\n\t});\n}\n\nexport const db_admin_get_products = data => dispatch => {\n\treturn apiCall('post', `/api/admin/products`, data)\n\t.then(function(res) {\n\t\tdispatch(state_get_admin_data(res));\n\t\treturn {complete: true};\n\t})\n\t.catch(function(err) {\n\t\treturn {complete: false, message: err};\n\t});\n}\n\nexport const db_add_product = product => dispatch => {\n\treturn apiCall('post', `/api/admin/product/add`, {...product, price: product.price * 100})\n\t.then(function(res) {\n\t\tdispatch(db_admin_get_products({page: 1, amount: 25}))\n\t\treturn {complete: true};\n\t})\n\t.catch(function(err) {\n\t\treturn {complete: false, message: err};\n\t});\n}\n\nexport const db_admin_get_orders = data => dispatch => {\n\treturn apiCall('post', `/api/admin/workers`, data)\n\t.then(function(res) {\n\t\tdispatch(state_get_admin_data(res));\n\t\treturn {complete: true};\n\t})\n\t.catch(function(err) {\n\t\treturn {complete: false, message: err};\n\t});\n}\n\nexport const db_get_export_file = (file_name) => dispatch => {\n\treturn apiCall('get', `/api/admin/export`, { responseType: 'blob' })\n\t.then(function(res) {\n\t\tsaveAs(res, `${file_name}.xlsx`);\n\t\treturn {complete: true};\n\t})\n\t.catch(function(err) {\n\t\tconsole.log(err);\n\t\treturn {complete: false, message: err};\n\t});\n}\n\nexport const db_export_table = (table, location, file_name) => dispatch => {\n\treturn apiCall('post', `/api/admin/export`, { table: table, location: location })\n\t.then(function(res) {\n\t\tdispatch(db_get_export_file(file_name));\n\t\treturn {complete: true};\n\t})\n\t.catch(function(err) {\n\t\treturn {complete: false, message: err};\n\t});\n}\n\nexport const db_update_product_active = data => dispatch => {\n\treturn apiCall('put', `/api/admin/product/status`, data)\n\t.then(function(res) {\n\t\tdispatch(state_update_admin_data(data));\n\t\treturn {complete: true};\n\t})\n\t.catch(function(error) {\n\t\treturn {complete: false, message: error.data.error};\n\t});\n}\n\n"]},"metadata":{},"sourceType":"module"}