{"ast":null,"code":"import _objectSpread from \"/Users/jackjoliet/Documents/marketplace/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"/Users/jackjoliet/Documents/marketplace/front/src/components/Forms/JobDetail.js\";\nimport React, { Component, Fragment } from 'react';\nimport { Link, withRouter } from 'react-router-dom';\nimport { connect } from \"react-redux\";\nimport { confirmAlert } from 'react-confirm-alert';\nimport moment from 'moment';\nimport getTime from '../../utils/getTime';\nimport getImg from '../../utils/getImg';\nimport empty from 'is-empty';\nimport { WORKER_RATE } from '../../utils/constants';\nimport { db_cancel_job } from '../../store/actions/jobs';\nimport { db_add_assignment, db_get_job_assignments } from '../../store/actions/assignments';\nimport { db_get_payment } from '../../store/actions/payments';\nimport Calendar from '../Graphics/Calendar';\nimport WorkerCard from '../Graphics/WorkerCard';\nimport Clock from '../Graphics/Clock';\nimport Loading from '../Graphics/Loading';\nimport CostEstimate from '../Graphics/CostEstimate';\n\nclass JobDetail extends Component {\n  constructor(props) {\n    super(props);\n\n    this.cancelJob = async cancel_fee => {\n      this.setState(_objectSpread({}, this.state, {\n        loaded: false\n      }));\n      const resp = await this.props.db_cancel_job(_objectSpread({}, this.props.job, {\n        cancel_fee: cancel_fee,\n        stripe_id: this.props.user.stripe_id\n      }));\n      if (resp.complete) this.props.hide();\n      if (this.props.dashboard) this.props.refresh();\n      this.setState(_objectSpread({}, this.state, {\n        loaded: true\n      }));\n    };\n\n    this.confirm = () => {\n      const job = this.props.job;\n      const now = moment().hour() * 60 + moment().minute();\n      const fee = job.status == \"Scheduled\" && moment.utc(job.date).isSame(moment(), 'day') && job.time - 720 < now;\n      confirmAlert({\n        title: 'Confirm Job Cancellation',\n        message: fee ? 'Are you sure you want to cancel your job? Because the start time is in less than 12 hours, you will be charged a $5.00 late cancellation fee.' : 'Are you sure you want to cancel your job?',\n        buttons: [{\n          label: 'Yes',\n          onClick: () => this.cancelJob(fee)\n        }, {\n          label: 'No',\n          onClick: () => {}\n        }]\n      });\n    };\n\n    this.state = {\n      loaded: false,\n      payment: {}\n    };\n  }\n\n  async componentDidMount() {\n    await this.props.db_get_job_assignments(this.props.job.id);\n    let payment = {};\n\n    if (this.props.job.status == \"Completed\") {\n      payment = await db_get_payment(this.props.job.id);\n    }\n\n    this.setState({\n      loaded: true,\n      payment: payment.complete ? payment.payment : {}\n    });\n  }\n\n  render() {\n    const _this$props = this.props,\n          job = _this$props.job,\n          assignments = _this$props.assignments;\n    const payment = this.state.payment;\n    let workers = [];\n\n    for (let i = 0; i < assignments.length; i++) {\n      workers.push(React.createElement(WorkerCard, {\n        key: i,\n        worker: assignments[i],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }));\n    }\n\n    for (let i = assignments.length; i < job.workers; i++) {\n      workers.push(React.createElement(WorkerCard, {\n        key: i,\n        def: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }));\n    }\n\n    const hide_invoice_line = moment(job.date).isSame(moment(new Date()), 'day') && moment().hour() * 60 + moment().minute() < payment.hours * 60 + job.time + 60;\n    return React.createElement(Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"job-overlay\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, !this.state.loaded && React.createElement(Loading, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }), this.state.loaded && React.createElement(\"div\", {\n      className: \"overlay-box\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"close\",\n      onClick: this.props.hide,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, \"X\"), React.createElement(\"img\", {\n      className: \"detail-header-img\",\n      src: getImg(job.type),\n      alt: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"detail-title-div\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"detail-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, job.type), React.createElement(\"span\", {\n      className: \"status-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, \"Status: \", React.createElement(\"span\", {\n      style: {\n        color: job.status == \"Pending\" ? \"red\" : \"green\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, job.status))), React.createElement(\"div\", {\n      className: \"overlay-content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, hide_invoice_line && payment.paid && empty(payment.cash) && !empty(payment.invoice_url) && React.createElement(\"span\", {\n      className: \"indiv-description\",\n      style: {\n        color: \"green\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, \"Invoice paid. View invoice \", React.createElement(\"a\", {\n      href: payment.invoice_url,\n      target: \"_blank\",\n      style: {\n        textDecoration: \"underline\",\n        color: \"rgb(0,0,0,0.65)\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, \"here\"), \".\"), hide_invoice_line && !payment.paid && empty(payment.cash) && !empty(payment.invoice_url) && React.createElement(\"span\", {\n      className: \"indiv-description\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, \"Pay invoice here: \", React.createElement(\"a\", {\n      href: payment.invoice_url,\n      target: \"_blank\",\n      style: {\n        textDecoration: \"underline\",\n        color: \"rgb(0,0,0,0.65)\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, \"invoice url.\")), job.status == \"Completed\" && React.createElement(\"div\", {\n      className: \"icon-section\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"indiv-payment-div\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, !empty(payment.signature) && React.createElement(Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      className: \"sig-display\",\n      src: payment.signature,\n      alt: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    })), empty(payment.signature) && React.createElement(Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, !empty(payment.cash) && React.createElement(Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"indiv-description\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, \"CASH PAID\"), React.createElement(\"span\", {\n      className: \"indiv-value\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, \"$\", (payment.cash / 100).toFixed(2))), empty(payment.cash) && React.createElement(Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"indiv-description\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, \"YOU WERE NOT HOME WHEN THE JOB ENDED\"), React.createElement(\"span\", {\n      className: \"indiv-description\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, \"INVOICE SENT TO EMAIL\")))), React.createElement(\"div\", {\n      className: \"invoice-section\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"invoice-column\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, \"Flat worker rate\"), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, \"Hours worked\"), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, \"Number of workers\"), React.createElement(\"hr\", {\n      className: \"invoice-hr\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, \"Subtotal\")), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, \"Gratuity\"), React.createElement(\"hr\", {\n      className: \"invoice-hr\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, \"Total\"))), React.createElement(\"div\", {\n      className: \"invoice-column right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, \"$\", payment.rate.toFixed(2)), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, payment.hours), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, payment.workers), React.createElement(\"hr\", {\n      className: \"invoice-hr right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, \"$\", (payment.amount / 100).toFixed(2))), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, \"$\", (payment.tip / 100).toFixed(2)), React.createElement(\"hr\", {\n      className: \"invoice-hr right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, \"$\", ((payment.amount + payment.tip) / 100).toFixed(2)))))), React.createElement(\"div\", {\n      className: \"icon-section\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"hide-small\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, React.createElement(Calendar, {\n      month: moment.utc(job.date).format(\"MMM\"),\n      day: moment.utc(job.date).format(\"DD\"),\n      color: \"grey\",\n      style: {\n        width: \"12rem\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"customer-info-div\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"customer-info-text show-small\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, \"DATE:\"), \" \", moment.utc(job.date).format('MMM DD, YYYY')), React.createElement(\"span\", {\n      className: \"customer-info-text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }, \"TIME:\"), \" \", getTime(job.time), \" \", job.tz), React.createElement(\"span\", {\n      className: \"customer-info-text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, \"LOCATION:\"), \" \", React.createElement(\"a\", {\n      href: `http://maps.google.com/?q=${job.address}, ${job.city}, ${job.state} ${job.zip}`,\n      target: \"_blank\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, job.address, \", \", job.city, \", \", job.state, \" \", job.zip)), job.status != \"Completed\" && React.createElement(\"span\", {\n      className: \"customer-info-text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, \"ESTIMATED HOURS:\"), \" \", job.hours), job.status != \"Completed\" && React.createElement(\"div\", {\n      className: \"customer-info-text estimate\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, \"ESTIMATED COST:\")), \" \", React.createElement(CostEstimate, {\n      job: job,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    })))), React.createElement(\"div\", {\n      className: \"description-div\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }, \"DESCRIPTION:\"), React.createElement(\"span\", {\n      className: \"description-content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, job.description)), React.createElement(\"span\", {\n      className: \"worker-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, \"Workers (\", job.workers, \"):\"), React.createElement(\"div\", {\n      className: \"workers-div\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, workers), job.status == \"Scheduled\" && React.createElement(Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, React.createElement(\"hr\", {\n      className: \"worker-hr\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"instructions-block\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, \"INSTRUCTIONS: Please be at your home at least 5 minutes before the start of the job. Upon your worker(s) arrival they will knock on the door. Please be at your house for the duration of the job for maximum efficiency. If you do plan on leaving please let your worker(s) know. If you have any additional questions please visit our FAQ page.\"), React.createElement(\"div\", {\n      className: \"instructions-block\",\n      style: {\n        paddingTop: \"0\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, \"NOTE: You can cancel 12+ hours from the job time free of charge. If you cancel within 12 hours of your job time you will be charged a $5.00 flat fee for late cancellation.\")), (job.status == \"Pending\" || job.status == \"Scheduled\") && React.createElement(\"button\", {\n      className: \"cancel-btn\",\n      onClick: this.confirm,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, \"CANCEL JOB\")))));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  user: state.auth.user,\n  assignments: state.jobassignments\n});\n\nexport default connect(mapStateToProps, {\n  db_cancel_job,\n  db_add_assignment,\n  db_get_job_assignments\n})(withRouter(JobDetail));","map":{"version":3,"sources":["/Users/jackjoliet/Documents/marketplace/front/src/components/Forms/JobDetail.js"],"names":["React","Component","Fragment","Link","withRouter","connect","confirmAlert","moment","getTime","getImg","empty","WORKER_RATE","db_cancel_job","db_add_assignment","db_get_job_assignments","db_get_payment","Calendar","WorkerCard","Clock","Loading","CostEstimate","JobDetail","constructor","props","cancelJob","cancel_fee","setState","state","loaded","resp","job","stripe_id","user","complete","hide","dashboard","refresh","confirm","now","hour","minute","fee","status","utc","date","isSame","time","title","message","buttons","label","onClick","payment","componentDidMount","id","render","assignments","workers","i","length","push","hide_invoice_line","Date","hours","type","color","paid","cash","invoice_url","textDecoration","signature","toFixed","rate","amount","tip","format","width","tz","address","city","zip","description","paddingTop","mapStateToProps","auth","jobassignments"],"mappings":"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","sourcesContent":["import React, {Component, Fragment} from 'react';\nimport {Link, withRouter} from 'react-router-dom';\nimport {connect} from \"react-redux\";\nimport {confirmAlert} from 'react-confirm-alert';\nimport moment from 'moment';\nimport getTime from '../../utils/getTime';\nimport getImg from '../../utils/getImg';\nimport empty from 'is-empty';\nimport {WORKER_RATE} from '../../utils/constants';\nimport {db_cancel_job} from '../../store/actions/jobs';\nimport {db_add_assignment, db_get_job_assignments} from '../../store/actions/assignments';\nimport {db_get_payment} from '../../store/actions/payments';\n\nimport Calendar from '../Graphics/Calendar';\nimport WorkerCard from '../Graphics/WorkerCard';\nimport Clock from '../Graphics/Clock';\nimport Loading from '../Graphics/Loading';\nimport CostEstimate from '../Graphics/CostEstimate';\n\nclass JobDetail extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tloaded: false,\n\t\t\tpayment: {}\n\t\t};\n\t}\n\n  async componentDidMount() {\n  \tawait this.props.db_get_job_assignments(this.props.job.id);\n  \tlet payment = {};\n  \tif(this.props.job.status == \"Completed\") {\n  \t\tpayment = await db_get_payment(this.props.job.id);\n  \t}\n  \tthis.setState({\n  \t\tloaded: true,\n  \t\tpayment: payment.complete ? payment.payment : {}\n  \t});\n  }\n\n  cancelJob = async (cancel_fee) => {\n  \tthis.setState({...this.state, loaded: false});\n  \tconst resp = await this.props.db_cancel_job({...this.props.job, cancel_fee: cancel_fee, stripe_id: this.props.user.stripe_id});\n  \tif(resp.complete) this.props.hide();\n  \tif(this.props.dashboard) this.props.refresh();\n  \tthis.setState({...this.state, loaded: true});\n  }\n\n  confirm = () => {\n  \tconst {job} = this.props;\n  \tconst now = (moment().hour()*60) + moment().minute();\n  \tconst fee = job.status == \"Scheduled\" && moment.utc(job.date).isSame(moment(), 'day') && (job.time - 720 < now);\n  \tconfirmAlert({\n      title: 'Confirm Job Cancellation',\n      message: fee ? 'Are you sure you want to cancel your job? Because the start time is in less than 12 hours, you will be charged a $5.00 late cancellation fee.' : 'Are you sure you want to cancel your job?',\n      buttons: [\n        {\n          label: 'Yes',\n          onClick: () => this.cancelJob(fee)\n        },\n        {\n          label: 'No',\n          onClick: () => {}\n        }\n      ]\n    });\n  }\n\n\trender() {\n\t\tconst {job, assignments} = this.props;\n\t\tconst {payment} = this.state;\n\t\tlet workers = [];\n\t\tfor(let i = 0; i < assignments.length; i++) {\n\t\t\tworkers.push(<WorkerCard key={i} worker={assignments[i]}/>);\n\t\t}\n\t\tfor(let i = assignments.length; i < job.workers; i++) {\n\t\t\tworkers.push(<WorkerCard key={i} def/>);\n\t\t}\n\n\t\tconst hide_invoice_line = moment(job.date).isSame(moment(new Date()), 'day') && (moment().hour()*60) + moment().minute() < (payment.hours*60) + job.time + 60;\n\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<div className=\"job-overlay\">\n\t\t\t\t\t{!this.state.loaded && (<Loading />)}\n\t\t\t\t\t{this.state.loaded && (<div className=\"overlay-box\">\n\t\t\t\t\t\t<span className=\"close\" onClick={this.props.hide}>X</span>\n\t\t\t\t\t\t<img className=\"detail-header-img\" src={getImg(job.type)} alt=\"\"/>\n\t\t\t\t\t\t<div className=\"detail-title-div\">\n\t\t\t\t\t\t\t<span className=\"detail-title\">{job.type}</span>\n\t\t\t\t\t\t\t<span className=\"status-title\">Status: <span style={{color: job.status == \"Pending\" ? \"red\" : \"green\"}}>{job.status}</span></span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"overlay-content\">\n\t\t\t\t\t\t\t{hide_invoice_line && payment.paid && empty(payment.cash) && !empty(payment.invoice_url) && (<span className=\"indiv-description\" style={{color: \"green\"}}>Invoice paid. View invoice <a href={payment.invoice_url} target=\"_blank\" style={{textDecoration: \"underline\", color: \"rgb(0,0,0,0.65)\"}}>here</a>.</span>)}\n\t\t\t\t\t\t\t{hide_invoice_line && !payment.paid && empty(payment.cash) && !empty(payment.invoice_url) && (<span className=\"indiv-description\">Pay invoice here: <a href={payment.invoice_url} target=\"_blank\" style={{textDecoration: \"underline\", color: \"rgb(0,0,0,0.65)\"}}>invoice url.</a></span>)}\n\t\t\t\t\t\t\t{job.status == \"Completed\" && (<div className=\"icon-section\">\n\t\t\t\t\t\t\t\t<div className=\"indiv-payment-div\">\n\t\t\t\t\t\t\t\t\t{!empty(payment.signature) && (<Fragment>\n\t\t\t\t\t\t\t\t\t\t<img className=\"sig-display\" src={payment.signature} alt=\"\"/>\n\t\t\t\t\t\t\t\t\t</Fragment>)}\n\t\t\t\t\t\t\t\t\t{empty(payment.signature) && (<Fragment>\n\t\t\t\t\t\t\t\t\t\t{!empty(payment.cash) && (<Fragment>\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"indiv-description\">CASH PAID</span>\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"indiv-value\">${(payment.cash / 100).toFixed(2)}</span>\n\t\t\t\t\t\t\t\t\t\t</Fragment>)}\n\t\t\t\t\t\t\t\t\t\t{empty(payment.cash) && (<Fragment>\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"indiv-description\">YOU WERE NOT HOME WHEN THE JOB ENDED</span>\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"indiv-description\">INVOICE SENT TO EMAIL</span>\n\t\t\t\t\t\t\t\t\t\t</Fragment>)}\n\t\t\t\t\t\t\t\t\t</Fragment>)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"invoice-section\">\n\t\t\t\t\t\t\t\t\t<div className=\"invoice-column\">\n\t\t\t\t\t\t\t\t\t\t<span>Flat worker rate</span>\n\t\t\t\t\t\t\t\t\t\t<span>Hours worked</span>\n\t\t\t\t\t\t\t\t\t\t<span>Number of workers</span>\n\t\t\t\t\t\t\t\t\t\t<hr className=\"invoice-hr\"/>\n\t\t\t\t\t\t\t\t\t\t<span><strong>Subtotal</strong></span>\n\t\t\t\t\t\t\t\t\t\t<span>Gratuity</span>\n\t\t\t\t\t\t\t\t\t\t<hr className=\"invoice-hr\"/>\n\t\t\t\t\t\t\t\t\t\t<span><strong>Total</strong></span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"invoice-column right\">\n\t\t\t\t\t\t\t\t\t\t<span>${(payment.rate).toFixed(2)}</span>\n\t\t\t\t\t\t\t\t\t\t<span>{payment.hours}</span>\n\t\t\t\t\t\t\t\t\t\t<span>{payment.workers}</span>\n\t\t\t\t\t\t\t\t\t\t<hr className=\"invoice-hr right\"/>\n\t\t\t\t\t\t\t\t\t\t<span><strong>${(payment.amount / 100).toFixed(2)}</strong></span>\n\t\t\t\t\t\t\t\t\t\t<span>${((payment.tip)/100).toFixed(2)}</span>\n\t\t\t\t\t\t\t\t\t\t<hr className=\"invoice-hr right\"/>\n\t\t\t\t\t\t\t\t\t\t<span><strong>${((payment.amount + payment.tip) / 100).toFixed(2)}</strong></span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>)}\n\t\t\t\t\t\t\t<div className=\"icon-section\">\n\t\t\t\t\t\t\t\t<div className=\"hide-small\"><Calendar month={moment.utc(job.date).format(\"MMM\")} day={moment.utc(job.date).format(\"DD\")} color=\"grey\" style={{width: \"12rem\"}}/></div>\n\t\t\t\t\t\t\t\t<div className=\"customer-info-div\">\n\t\t\t\t\t\t\t\t\t<span className=\"customer-info-text show-small\"><strong>DATE:</strong> {moment.utc(job.date).format('MMM DD, YYYY')}</span>\n\t\t\t\t\t\t\t\t\t<span className=\"customer-info-text\"><strong>TIME:</strong> {getTime(job.time)} {job.tz}</span>\n\t\t\t\t\t\t\t\t\t<span className=\"customer-info-text\"><strong>LOCATION:</strong> <a href={`http://maps.google.com/?q=${job.address}, ${job.city}, ${job.state} ${job.zip}`} target=\"_blank\">{job.address}, {job.city}, {job.state} {job.zip}</a></span>\n\t\t\t\t\t\t\t\t\t{job.status != \"Completed\" && (<span className=\"customer-info-text\"><strong>ESTIMATED HOURS:</strong> {job.hours}</span>)}\n\t\t\t\t\t\t\t\t\t{job.status != \"Completed\" && (<div className=\"customer-info-text estimate\"><span ><strong>ESTIMATED COST:</strong></span> <CostEstimate job={job}/></div>)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"description-div\">\n\t\t\t\t\t\t\t\t<span>DESCRIPTION:</span>\n\t\t\t\t\t\t\t\t<span className=\"description-content\">{job.description}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<span className=\"worker-title\">Workers ({job.workers}):</span>\n\t\t\t\t\t\t\t<div className=\"workers-div\">\n\t\t\t\t\t\t\t\t{workers}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{job.status == \"Scheduled\" && (<Fragment><hr className=\"worker-hr\"/>\n\t\t\t\t\t\t\t<div className=\"instructions-block\">\n\t\t\t\t\t\t\t\tINSTRUCTIONS: Please be at your home at least 5 minutes before the start of the job. \n\t\t\t\t\t\t\t\tUpon your worker(s) arrival they will knock on the door. \n\t\t\t\t\t\t\t\tPlease be at your house for the duration of the job for maximum efficiency. \n\t\t\t\t\t\t\t\tIf you do plan on leaving please let your worker(s) know. \n\t\t\t\t\t\t\t\tIf you have any additional questions please visit our FAQ page.\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"instructions-block\" style={{paddingTop: \"0\"}}>\n\t\t\t\t\t\t\t\tNOTE: You can cancel 12+ hours from the job time free of charge. \n\t\t\t\t\t\t\t\tIf you cancel within 12 hours of your job time you will be charged \n\t\t\t\t\t\t\t\ta $5.00 flat fee for late cancellation.\n\t\t\t\t\t\t\t</div></Fragment>)}\n\t\t\t\t\t\t\t{(job.status == \"Pending\" || job.status == \"Scheduled\") && (<button className=\"cancel-btn\" onClick={this.confirm}>CANCEL JOB</button>)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>)}\n\t\t\t\t</div>\n\t\t\t</Fragment>\n\t\t)\n\t}\n}\n\nconst mapStateToProps = state => ({\n\tuser: state.auth.user,\n\tassignments: state.jobassignments\n});\n\nexport default connect(mapStateToProps,{db_cancel_job, db_add_assignment, db_get_job_assignments})(withRouter(JobDetail));\n\n"]},"metadata":{},"sourceType":"module"}