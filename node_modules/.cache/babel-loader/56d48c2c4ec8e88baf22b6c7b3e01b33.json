{"ast":null,"code":"import _objectSpread from\"/Users/jackjoliet/Documents/marketplace/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{SET_CURRENT_USER,GET_ADMIN_DATA,UPDATE_ADMIN_DATA,GET_PRODUCT_OPTIONS}from\"../types\";import empty from'is-empty';import{saveAs}from'file-saver';import{apiCall}from'../../services/api';import{flatten}from'flat';export var state_get_admin=function state_get_admin(payload){return{type:SET_CURRENT_USER,payload:payload};};export var state_get_admin_data=function state_get_admin_data(payload){return{type:GET_ADMIN_DATA,payload:payload};};export var state_update_admin_data=function state_update_admin_data(payload){return{type:UPDATE_ADMIN_DATA,payload:payload};};export var state_get_product_options=function state_get_product_options(payload){return{type:GET_PRODUCT_OPTIONS,payload:payload};};export var db_get_admin=function db_get_admin(user){return function(dispatch){return apiCall('get',\"/api/admin/\".concat(user.id)).then(function(res){dispatch(state_get_admin(_objectSpread({},user,{},res[0])));return{complete:true};}).catch(function(err){return{complete:false,message:err};});};};export var db_admin_get_products=function db_admin_get_products(data){return function(dispatch){return apiCall('post',\"/api/admin/products\",data).then(function(res){dispatch(state_get_admin_data(res));return{complete:true};}).catch(function(err){return{complete:false,message:err};});};};export var db_admin_get_product_options=function db_admin_get_product_options(data){return function(dispatch){return apiCall('get',\"/api/admin/products/options\").then(function(res){dispatch(state_get_product_options(res));return{complete:true};}).catch(function(err){return{complete:false,message:err};});};};export var db_add_product=function db_add_product(product){return function(dispatch){return apiCall('post',\"/api/admin/product/add\",_objectSpread({},product,{price:product.price*100})).then(function(res){dispatch(db_admin_get_products({page:1,amount:25}));return{complete:true};}).catch(function(err){return{complete:false,message:err};});};};export var db_admin_get_orders=function db_admin_get_orders(data){return function(dispatch){return apiCall('post',\"/api/admin/orders\",data).then(function(res){dispatch(state_get_admin_data(res));return{complete:true};}).catch(function(err){return{complete:false,message:err};});};};export var db_get_export_file=function db_get_export_file(file_name){return function(dispatch){return apiCall('get',\"/api/admin/export\",{responseType:'blob'}).then(function(res){saveAs(res,\"\".concat(file_name,\".xlsx\"));return{complete:true};}).catch(function(err){console.log(err);return{complete:false,message:err};});};};export var db_export_table=function db_export_table(table,filter,file_name){return function(dispatch){return apiCall('post',\"/api/admin/export\",{table:table,filter:filter}).then(function(res){dispatch(db_get_export_file(file_name));return{complete:true};}).catch(function(err){return{complete:false,message:err};});};};export var db_update_product_active=function db_update_product_active(data){return function(dispatch){return apiCall('put',\"/api/admin/product/status\",data).then(function(res){dispatch(state_update_admin_data(data));return{complete:true};}).catch(function(error){return{complete:false,message:error.data.error};});};};","map":{"version":3,"sources":["/Users/jackjoliet/Documents/marketplace/front/src/store/actions/admin.js"],"names":["SET_CURRENT_USER","GET_ADMIN_DATA","UPDATE_ADMIN_DATA","GET_PRODUCT_OPTIONS","empty","saveAs","apiCall","flatten","state_get_admin","payload","type","state_get_admin_data","state_update_admin_data","state_get_product_options","db_get_admin","user","dispatch","id","then","res","complete","catch","err","message","db_admin_get_products","data","db_admin_get_product_options","db_add_product","product","price","page","amount","db_admin_get_orders","db_get_export_file","file_name","responseType","console","log","db_export_table","table","filter","db_update_product_active","error"],"mappings":"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","sourcesContent":["import {SET_CURRENT_USER, GET_ADMIN_DATA, UPDATE_ADMIN_DATA, GET_PRODUCT_OPTIONS} from \"../types\";\nimport empty from 'is-empty';\nimport {saveAs} from 'file-saver';\nimport {apiCall} from '../../services/api';\nimport {flatten} from 'flat';\n\nexport const state_get_admin = payload => ({\n\ttype: SET_CURRENT_USER,\n\tpayload\n});\n\nexport const state_get_admin_data = payload => ({\n\ttype: GET_ADMIN_DATA,\n\tpayload\n});\n\nexport const state_update_admin_data = payload => ({\n\ttype: UPDATE_ADMIN_DATA,\n\tpayload\n});\n\nexport const state_get_product_options = payload => ({\n\ttype: GET_PRODUCT_OPTIONS,\n\tpayload\n});\n\nexport const db_get_admin = user => dispatch => {\n\treturn apiCall('get', `/api/admin/${user.id}`)\n\t.then(function(res) {\n\t\tdispatch(state_get_admin({...user, ...res[0]}));\n\t\treturn {complete: true};\n\t})\n\t.catch(function(err) {\n\t\treturn {complete: false, message: err};\n\t});\n}\n\nexport const db_admin_get_products = data => dispatch => {\n\treturn apiCall('post', `/api/admin/products`, data)\n\t.then(function(res) {\n\t\tdispatch(state_get_admin_data(res));\n\t\treturn {complete: true};\n\t})\n\t.catch(function(err) {\n\t\treturn {complete: false, message: err};\n\t});\n}\n\nexport const db_admin_get_product_options = data => dispatch => {\n\treturn apiCall('get', `/api/admin/products/options`)\n\t.then(function(res) {\n\t\tdispatch(state_get_product_options(res));\n\t\treturn {complete: true};\n\t})\n\t.catch(function(err) {\n\t\treturn {complete: false, message: err};\n\t});\n}\n\nexport const db_add_product = product => dispatch => {\n\treturn apiCall('post', `/api/admin/product/add`, {...product, price: product.price * 100})\n\t.then(function(res) {\n\t\tdispatch(db_admin_get_products({page: 1, amount: 25}))\n\t\treturn {complete: true};\n\t})\n\t.catch(function(err) {\n\t\treturn {complete: false, message: err};\n\t});\n}\n\nexport const db_admin_get_orders = data => dispatch => {\n\treturn apiCall('post', `/api/admin/orders`, data)\n\t.then(function(res) {\n\t\tdispatch(state_get_admin_data(res));\n\t\treturn {complete: true};\n\t})\n\t.catch(function(err) {\n\t\treturn {complete: false, message: err};\n\t});\n}\n\nexport const db_get_export_file = (file_name) => dispatch => {\n\treturn apiCall('get', `/api/admin/export`, { responseType: 'blob' })\n\t.then(function(res) {\n\t\tsaveAs(res, `${file_name}.xlsx`);\n\t\treturn {complete: true};\n\t})\n\t.catch(function(err) {\n\t\tconsole.log(err);\n\t\treturn {complete: false, message: err};\n\t});\n}\n\nexport const db_export_table = (table, filter, file_name) => dispatch => {\n\treturn apiCall('post', `/api/admin/export`, { table: table, filter: filter })\n\t.then(function(res) {\n\t\tdispatch(db_get_export_file(file_name));\n\t\treturn {complete: true};\n\t})\n\t.catch(function(err) {\n\t\treturn {complete: false, message: err};\n\t});\n}\n\nexport const db_update_product_active = data => dispatch => {\n\treturn apiCall('put', `/api/admin/product/status`, data)\n\t.then(function(res) {\n\t\tdispatch(state_update_admin_data(data));\n\t\treturn {complete: true};\n\t})\n\t.catch(function(error) {\n\t\treturn {complete: false, message: error.data.error};\n\t});\n}\n\n"]},"metadata":{},"sourceType":"module"}