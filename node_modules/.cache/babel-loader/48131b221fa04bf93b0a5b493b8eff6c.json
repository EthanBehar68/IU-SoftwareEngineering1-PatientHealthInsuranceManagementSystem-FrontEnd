{"ast":null,"code":"import _regeneratorRuntime from\"/Users/jackjoliet/Documents/marketplace/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _toConsumableArray from\"/Users/jackjoliet/Documents/marketplace/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"/Users/jackjoliet/Documents/marketplace/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/jackjoliet/Documents/marketplace/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/jackjoliet/Documents/marketplace/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/jackjoliet/Documents/marketplace/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/jackjoliet/Documents/marketplace/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/Users/jackjoliet/Documents/marketplace/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/jackjoliet/Documents/marketplace/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component,Fragment}from'react';import{Link,withRouter}from'react-router-dom';import{connect}from\"react-redux\";import{confirmAlert}from'react-confirm-alert';import{db_get_products}from\"../../store/actions/products\";import sumItems from'../../utils/sumItems';import moment from'moment';import empty from'is-empty';import Navbar from'../../components/Nav/Navbar';import Loading from'../../components/Graphics/Loading';import ProductCard from'../../components/Forms/ProductCard';var Products=/*#__PURE__*/function(_Component){_inherits(Products,_Component);function Products(props){var _this;_classCallCheck(this,Products);_this=_possibleConstructorReturn(this,_getPrototypeOf(Products).call(this,props));_this.toCart=function(products){_this.setState(_objectSpread({},_this.state,{items:_this.state.items+sumItems(products)}));var existing=empty(localStorage.getItem(\"products\"))?[]:JSON.parse(localStorage.getItem(\"products\"));localStorage.setItem(\"products\",JSON.stringify([].concat(_toConsumableArray(existing),_toConsumableArray(products))));_this.confirm(products);};_this.confirm=function(products){confirmAlert({title:'Added to Cart',message:\"\".concat(products[0].product,\"(s) added to cart\"),buttons:[{label:'To Cart',onClick:function onClick(){return _this.props.history.push('/checkout');}},{label:'Keep Shopping',onClick:function onClick(){}}]});};_this.state={loaded:false,items:sumItems(_this.props.products)};_this.toCart=_this.toCart.bind(_assertThisInitialized(_this));return _this;}_createClass(Products,[{key:\"componentDidMount\",value:function componentDidMount(){var products;return _regeneratorRuntime.async(function componentDidMount$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _regeneratorRuntime.awrap(this.props.db_get_products());case 2:products=empty(localStorage.getItem(\"products\"))?[]:JSON.parse(localStorage.getItem(\"products\"));this.setState({loaded:true,items:sumItems(products)});case 4:case\"end\":return _context.stop();}}},null,this);}},{key:\"render\",value:function render(){var _this2=this;var product_list=this.props.products.map(function(product){return React.createElement(ProductCard,{product:product,key:product.id,toCart:_this2.toCart});});return React.createElement(Fragment,null,React.createElement(Navbar,{active:\"home\",items:this.state.items}),!this.state.loaded&&React.createElement(Loading,null),this.state.loaded&&React.createElement(\"div\",{className:\"dashboard-container\"},React.createElement(\"div\",{className:\"dashboard-box\"},!empty(product_list)&&React.createElement(Fragment,null,product_list,React.createElement(\"div\",{className:\"dashboard-side\",style:{borderBottom:\"none\",height:\"10rem\"}})),empty(product_list)&&React.createElement(\"div\",{className:\"thank-you-div\"},React.createElement(\"span\",{style:{fontSize:\"1.5rem\",textAlign:\"center\"}},\"There are no products currently for sale.\")))));}}]);return Products;}(Component);var mapStateToProps=function mapStateToProps(state){return{products:state.products};};export default connect(mapStateToProps,{db_get_products:db_get_products})(withRouter(Products));","map":{"version":3,"sources":["/Users/jackjoliet/Documents/marketplace/front/src/containers/Customer/Products.js"],"names":["React","Component","Fragment","Link","withRouter","connect","confirmAlert","db_get_products","sumItems","moment","empty","Navbar","Loading","ProductCard","Products","props","toCart","products","setState","state","items","existing","localStorage","getItem","JSON","parse","setItem","stringify","confirm","title","message","product","buttons","label","onClick","history","push","loaded","bind","product_list","map","id","borderBottom","height","fontSize","textAlign","mapStateToProps"],"mappings":"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","sourcesContent":["import React, {Component, Fragment} from 'react';\nimport {Link, withRouter} from 'react-router-dom';\nimport {connect} from \"react-redux\";\nimport {confirmAlert} from 'react-confirm-alert';\nimport {db_get_products} from \"../../store/actions/products\";\nimport sumItems from '../../utils/sumItems';\nimport moment from 'moment';\nimport empty from 'is-empty';\n\nimport Navbar from '../../components/Nav/Navbar';\nimport Loading from '../../components/Graphics/Loading';\nimport ProductCard from '../../components/Forms/ProductCard';\n\nclass Products extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tloaded: false,\n\t\t\titems: sumItems(this.props.products)\n\t\t};\n\t\tthis.toCart = this.toCart.bind(this);\n\t}\n\n  async componentDidMount() {\n  \tawait this.props.db_get_products();\n  \tconst products = empty(localStorage.getItem(\"products\")) ? [] : JSON.parse(localStorage.getItem(\"products\"));\n  \tthis.setState({\n  \t\tloaded: true,\n  \t\titems: sumItems(products)\n  \t});\n  }\n\n  toCart = products => {\n  \tthis.setState({\n  \t\t...this.state,\n  \t\titems: this.state.items + sumItems(products)\n  \t});\n  \tconst existing = empty(localStorage.getItem(\"products\")) ? [] : JSON.parse(localStorage.getItem(\"products\"));\n  \tlocalStorage.setItem(\"products\", JSON.stringify([...existing, ...products]));\n    this.confirm(products);\n  }\n\n  confirm = products => {\n    confirmAlert({\n      title: 'Added to Cart',\n      message: `${products[0].product}(s) added to cart`,\n      buttons: [\n        {\n          label: 'To Cart',\n          onClick: () => this.props.history.push('/checkout')\n        },\n        {\n          label: 'Keep Shopping',\n          onClick: () => {}\n        }\n      ]\n    });\n  }\n\n\trender() {\n\n\t\tlet product_list = this.props.products.map(product => \n      <ProductCard \n        product={product}\n        key={product.id}\n        toCart={this.toCart}\n      />\n    );\n\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<Navbar active=\"home\" items={this.state.items}/>\n\t\t\t\t{!this.state.loaded && (<Loading />)}\n\t\t\t\t{this.state.loaded && (<div className=\"dashboard-container\">\n\t\t\t\t\t<div className=\"dashboard-box\">\n\t\t\t\t    {!empty(product_list) && (<Fragment>\n              {product_list}\n              <div className=\"dashboard-side\" style={{borderBottom: \"none\", height: \"10rem\"}}></div>\n            </Fragment>)}\n            {empty(product_list) && (\n              <div className=\"thank-you-div\">\n                <span style={{fontSize: \"1.5rem\", textAlign: \"center\"}}>There are no products currently for sale.</span>\n              </div>\n            )}\n\t\t\t\t\t</div>\n\t\t\t\t</div>)}\n\t\t\t</Fragment>\n\t\t)\n\t}\n}\n\nconst mapStateToProps = state => ({\n  products: state.products\n});\n\nexport default connect(mapStateToProps, {db_get_products})(withRouter(Products));\n\n\n"]},"metadata":{},"sourceType":"module"}