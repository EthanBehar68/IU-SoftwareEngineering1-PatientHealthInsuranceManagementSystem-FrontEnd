{"ast":null,"code":"import _regeneratorRuntime from\"/Users/jackjoliet/Documents/marketplace/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _defineProperty from\"/Users/jackjoliet/Documents/marketplace/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/jackjoliet/Documents/marketplace/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/jackjoliet/Documents/marketplace/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/jackjoliet/Documents/marketplace/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/jackjoliet/Documents/marketplace/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/jackjoliet/Documents/marketplace/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/jackjoliet/Documents/marketplace/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component,Fragment}from'react';import{Link,withRouter}from'react-router-dom';import{connect}from\"react-redux\";import{loginUser}from\"../../store/actions/adminauth\";import{setFooter}from\"../../store/actions/footer\";import empty from'is-empty';import validator from'validator';import AdminNavbar from'../../components/Nav/AdminNavbar';import ErrorBanner from'../../components/Graphics/ErrorBanner';import Loading from'../../components/Graphics/Loading';var AdminSignIn=/*#__PURE__*/function(_Component){_inherits(AdminSignIn,_Component);function AdminSignIn(props){var _this;_classCallCheck(this,AdminSignIn);_this=_possibleConstructorReturn(this,_getPrototypeOf(AdminSignIn).call(this,props));_this.onChange=function(e){_this.setState(_objectSpread({},_this.state,{data:_objectSpread({},_this.state.data,_defineProperty({},e.target.id,e.target.value))}));};_this.onLogin=function _callee(e){var userData,resp;return _regeneratorRuntime.async(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_this.setState(_objectSpread({},_this.state,{loaded:false}));userData={email:_this.state.data.email,password:_this.state.data.password};_context.next=5;return _regeneratorRuntime.awrap(_this.props.loginUser(userData,_this.props.history));case 5:resp=_context.sent;// since we handle the redirect within our component, we don't need to pass in this.props.history as a parameter\nif(!resp.complete){_this.setState(_objectSpread({},_this.state,{error:resp.message,loaded:true}));}case 7:case\"end\":return _context.stop();}}});};_this.state={data:{first:\"\",last:\"\",email:\"\",phone:\"\",address:\"\",city:\"\",state:\"\",zip:\"\",password:\"\",password2:\"\"},error:\"\",loaded:true};return _this;}_createClass(AdminSignIn,[{key:\"componentWillReceiveProps\",value:function componentWillReceiveProps(nextProps){if(nextProps.auth.isAuthenticated){if(nextProps.auth.user.db==\"customers\"){this.props.setFooter(\"customers\");this.props.history.push(\"/app/dashboard\");}else if(nextProps.auth.user.db==\"workers\"){this.props.setFooter(\"workers\");this.props.history.push(\"/worker/dashboard\");}else{this.props.setFooter(\"admin\");this.props.history.push(\"/admin/dashboard\");}}}},{key:\"componentDidMount\",value:function componentDidMount(){// If logged in and user navigates to Login page, should redirect them to dashboard\nif(this.props.auth.isAuthenticated){if(this.props.auth.user.db==\"customers\"){this.props.setFooter(\"customers\");this.props.history.push(\"/app/dashboard\");}else if(this.props.auth.user.db==\"workers\"){this.props.setFooter(\"workers\");this.props.history.push(\"/worker/dashboard\");}else{this.props.setFooter(\"admin\");this.props.history.push(\"/admin/dashboard\");}}else{this.props.setFooter(\"admin\");}}},{key:\"render\",value:function render(){var _this2=this;var _this$state=this.state,data=_this$state.data,validation=_this$state.validation,empties=_this$state.empties;return React.createElement(Fragment,null,React.createElement(AdminNavbar,{signin:true}),!empty(this.state.error)&&React.createElement(ErrorBanner,{error:this.state.error,onHide:function onHide(){return _this2.setState(_objectSpread({},_this2.state,{error:''}));}}),!this.state.loaded&&React.createElement(Loading,null),this.state.loaded&&React.createElement(\"div\",{className:\"sign-in-container admin\"},React.createElement(\"div\",{className:\"sign-in-box-pic\"},React.createElement(\"form\",{className:\"sign-in-box worker\",onSubmit:this.onLogin},React.createElement(\"span\",{className:\"sign-in-title\"},\"Admin Sign In\"),React.createElement(\"div\",{className:\"input-group\"},React.createElement(\"span\",{className:\"field-label\"},\"Email\"),React.createElement(\"input\",{type:\"text\",className:\"text-field worker\",id:\"email\",onChange:this.onChange})),React.createElement(\"div\",{className:\"input-group\"},React.createElement(\"span\",{className:\"field-label\"},\"Password\"),React.createElement(\"input\",{type:\"password\",className:\"text-field worker\",id:\"password\",onChange:this.onChange})),React.createElement(\"button\",{className:\"sign-in-btn admin\",type:\"submit\"},\"Sign In\")))));}}]);return AdminSignIn;}(Component);var mapStateToProps=function mapStateToProps(state){return{auth:state.auth,errors:state.errors};};export default connect(mapStateToProps,{loginUser:loginUser,setFooter:setFooter})(withRouter(AdminSignIn));","map":{"version":3,"sources":["/Users/jackjoliet/Documents/marketplace/front/src/containers/Admin/AdminSignIn.js"],"names":["React","Component","Fragment","Link","withRouter","connect","loginUser","setFooter","empty","validator","AdminNavbar","ErrorBanner","Loading","AdminSignIn","props","onChange","e","setState","state","data","target","id","value","onLogin","preventDefault","loaded","userData","email","password","history","resp","complete","error","message","first","last","phone","address","city","zip","password2","nextProps","auth","isAuthenticated","user","db","push","validation","empties","mapStateToProps","errors"],"mappings":"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","sourcesContent":["import React, {Component, Fragment} from 'react';\nimport {Link, withRouter} from 'react-router-dom';\nimport {connect} from \"react-redux\";\nimport {loginUser} from \"../../store/actions/adminauth\";\nimport {setFooter} from \"../../store/actions/footer\";\nimport empty from 'is-empty';\nimport validator from 'validator';\n\nimport AdminNavbar from '../../components/Nav/AdminNavbar';\nimport ErrorBanner from '../../components/Graphics/ErrorBanner';\nimport Loading from '../../components/Graphics/Loading';\n\nclass AdminSignIn extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tdata: {\n\t\t\t\tfirst: \"\",\n\t      last: \"\",\n\t      email: \"\",\n\t      phone: \"\",\n\t      address: \"\",\n\t      city: \"\",\n\t      state: \"\",\n\t      zip: \"\",\n\t      password: \"\",\n\t      password2: \"\"\n\t\t\t},\n      error: \"\",\n      loaded: true\n\t\t};\n\t}\n\n\tcomponentWillReceiveProps(nextProps) {\n\t\tif (nextProps.auth.isAuthenticated) {\n\t\t\tif (nextProps.auth.user.db == \"customers\") {\n\t\t\t\tthis.props.setFooter(\"customers\");\n\t\t\t\tthis.props.history.push(\"/app/dashboard\");\n\t\t\t} else if (nextProps.auth.user.db == \"workers\") {\n\t\t\t\tthis.props.setFooter(\"workers\");\n\t\t\t\tthis.props.history.push(\"/worker/dashboard\");\n\t\t\t} else {\n\t\t\t\tthis.props.setFooter(\"admin\");\n\t\t\t\tthis.props.history.push(\"/admin/dashboard\");\n\t\t\t}\n    }\n  }\n\n  componentDidMount() {\n    // If logged in and user navigates to Login page, should redirect them to dashboard\n    if (this.props.auth.isAuthenticated) {\n    \tif (this.props.auth.user.db == \"customers\") {\n    \t\tthis.props.setFooter(\"customers\");\n\t\t\t\tthis.props.history.push(\"/app/dashboard\");\n\t\t\t} else if (this.props.auth.user.db == \"workers\") {\n\t\t\t\tthis.props.setFooter(\"workers\");\n\t\t\t\tthis.props.history.push(\"/worker/dashboard\");\n\t\t\t} else {\n\t\t\t\tthis.props.setFooter(\"admin\");\n\t\t\t\tthis.props.history.push(\"/admin/dashboard\");\n\t\t\t}\n    } else {\n    \tthis.props.setFooter(\"admin\");\n    }\n  }\n\n  onChange = e => {\n    this.setState({\n    \t...this.state,\n    \tdata: {\n    \t\t...this.state.data,\n    \t\t[e.target.id]: e.target.value \n    \t} \n    });\n  };\n\n  onLogin = async e => {\n    e.preventDefault();\n    this.setState({\n    \t...this.state,\n    \tloaded: false\n    });\n\t\tconst userData = {\n      email: this.state.data.email,\n      password: this.state.data.password\n    };\n\t\tconst resp = await this.props.loginUser(userData, this.props.history); // since we handle the redirect within our component, we don't need to pass in this.props.history as a parameter\n\t\tif(!resp.complete) {\n\t\t\tthis.setState({\n\t\t\t\t...this.state,\n\t\t\t\terror: resp.message,\n\t\t\t\tloaded: true\n\t\t\t});\n\t\t}\n  };\n\n\trender() {\n\t\tconst {data, validation, empties} = this.state;\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<AdminNavbar signin/>\n\t\t\t\t{!empty(this.state.error) && (<ErrorBanner error={this.state.error} onHide={() => this.setState({...this.state, error: ''})}/>)}\n\t\t\t\t{!this.state.loaded && (<Loading />)}\n\t\t\t\t{this.state.loaded && (<div className=\"sign-in-container admin\">\n\t\t\t\t\t<div className=\"sign-in-box-pic\">\n\t\t\t\t\t\t<form className=\"sign-in-box worker\" onSubmit={this.onLogin}>\n\t\t\t\t\t\t\t<span className=\"sign-in-title\">Admin Sign In</span>\n\t\t\t\t\t\t\t<div className=\"input-group\">\n\t\t\t\t\t\t\t\t<span className=\"field-label\">Email</span>\n\t\t\t\t\t\t\t\t<input type=\"text\" className=\"text-field worker\" id=\"email\" onChange={this.onChange}/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"input-group\">\n\t\t\t\t\t\t\t\t<span className=\"field-label\">Password</span>\n\t\t\t\t\t\t\t\t<input type=\"password\" className=\"text-field worker\" id=\"password\" onChange={this.onChange}/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<button className=\"sign-in-btn admin\" type=\"submit\">Sign In</button>\n\t\t\t\t\t\t</form>\n\t\t\t\t\t</div>\n\t\t\t\t</div>)}\n\t\t\t</Fragment>\n\t\t)\n\t}\n}\n\nconst mapStateToProps = state => ({\n  auth: state.auth,\n  errors: state.errors\n});\n\nexport default connect(mapStateToProps,{loginUser, setFooter})(withRouter(AdminSignIn));\n"]},"metadata":{},"sourceType":"module"}