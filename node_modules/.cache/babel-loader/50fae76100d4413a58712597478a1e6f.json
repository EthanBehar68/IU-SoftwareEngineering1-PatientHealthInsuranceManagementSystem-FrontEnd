{"ast":null,"code":"import _objectSpread from \"/Users/jackjoliet/Documents/marketplace/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport { SET_CURRENT_USER, GET_ADMIN_DATA, UPDATE_ADMIN_DATA, GET_PRODUCT_OPTIONS } from \"../types\";\nimport empty from 'is-empty';\nimport { saveAs } from 'file-saver';\nimport { apiCall } from '../../services/api';\nimport { flatten } from 'flat';\nexport const state_get_admin = payload => ({\n  type: SET_CURRENT_USER,\n  payload\n});\nexport const state_get_admin_data = payload => ({\n  type: GET_ADMIN_DATA,\n  payload\n});\nexport const state_update_admin_data = payload => ({\n  type: UPDATE_ADMIN_DATA,\n  payload\n});\nexport const state_get_product_options = payload => ({\n  type: GET_PRODUCT_OPTIONS,\n  payload\n});\nexport const db_get_admin = user => dispatch => {\n  return apiCall('get', `/api/admin/${user.id}`).then(function (res) {\n    dispatch(state_get_admin(_objectSpread({}, user, {}, res[0])));\n    return {\n      complete: true\n    };\n  }).catch(function (err) {\n    return {\n      complete: false,\n      message: err\n    };\n  });\n};\nexport const db_admin_get_products = data => dispatch => {\n  return apiCall('post', `/api/admin/products`, data).then(function (res) {\n    dispatch(state_get_admin_data(res));\n    return {\n      complete: true\n    };\n  }).catch(function (err) {\n    return {\n      complete: false,\n      message: err\n    };\n  });\n};\nexport const db_admin_get_product_options = data => dispatch => {\n  return apiCall('get', `/api/admin/products/options`).then(function (res) {\n    dispatch(state_get_product_options(res));\n    return {\n      complete: true\n    };\n  }).catch(function (err) {\n    return {\n      complete: false,\n      message: err\n    };\n  });\n};\nexport const db_add_product = product => dispatch => {\n  return apiCall('post', `/api/admin/product/add`, _objectSpread({}, product, {\n    price: product.price * 100\n  })).then(function (res) {\n    dispatch(db_admin_get_products({\n      page: 1,\n      amount: 25\n    }));\n    return {\n      complete: true\n    };\n  }).catch(function (err) {\n    return {\n      complete: false,\n      message: err\n    };\n  });\n};\nexport const db_admin_get_orders = data => dispatch => {\n  return apiCall('post', `/api/admin/orders`, data).then(function (res) {\n    dispatch(state_get_admin_data(res));\n    return {\n      complete: true\n    };\n  }).catch(function (err) {\n    return {\n      complete: false,\n      message: err\n    };\n  });\n};\nexport const db_get_export_file = file_name => dispatch => {\n  return apiCall('get', `/api/admin/export`, {\n    responseType: 'blob'\n  }).then(function (res) {\n    saveAs(res, `${file_name}.xlsx`);\n    return {\n      complete: true\n    };\n  }).catch(function (err) {\n    console.log(err);\n    return {\n      complete: false,\n      message: err\n    };\n  });\n};\nexport const db_export_table = (table, filter, file_name) => dispatch => {\n  return apiCall('post', `/api/admin/export`, {\n    table: table,\n    filter: filter\n  }).then(function (res) {\n    dispatch(db_get_export_file(file_name));\n    return {\n      complete: true\n    };\n  }).catch(function (err) {\n    return {\n      complete: false,\n      message: err\n    };\n  });\n};\nexport const db_update_product_active = data => dispatch => {\n  return apiCall('put', `/api/admin/product/status`, data).then(function (res) {\n    dispatch(state_update_admin_data(data));\n    return {\n      complete: true\n    };\n  }).catch(function (error) {\n    return {\n      complete: false,\n      message: error.data.error\n    };\n  });\n};","map":{"version":3,"sources":["/Users/jackjoliet/Documents/marketplace/front/src/store/actions/admin.js"],"names":["SET_CURRENT_USER","GET_ADMIN_DATA","UPDATE_ADMIN_DATA","GET_PRODUCT_OPTIONS","empty","saveAs","apiCall","flatten","state_get_admin","payload","type","state_get_admin_data","state_update_admin_data","state_get_product_options","db_get_admin","user","dispatch","id","then","res","complete","catch","err","message","db_admin_get_products","data","db_admin_get_product_options","db_add_product","product","price","page","amount","db_admin_get_orders","db_get_export_file","file_name","responseType","console","log","db_export_table","table","filter","db_update_product_active","error"],"mappings":"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","sourcesContent":["import {SET_CURRENT_USER, GET_ADMIN_DATA, UPDATE_ADMIN_DATA, GET_PRODUCT_OPTIONS} from \"../types\";\nimport empty from 'is-empty';\nimport {saveAs} from 'file-saver';\nimport {apiCall} from '../../services/api';\nimport {flatten} from 'flat';\n\nexport const state_get_admin = payload => ({\n\ttype: SET_CURRENT_USER,\n\tpayload\n});\n\nexport const state_get_admin_data = payload => ({\n\ttype: GET_ADMIN_DATA,\n\tpayload\n});\n\nexport const state_update_admin_data = payload => ({\n\ttype: UPDATE_ADMIN_DATA,\n\tpayload\n});\n\nexport const state_get_product_options = payload => ({\n\ttype: GET_PRODUCT_OPTIONS,\n\tpayload\n});\n\nexport const db_get_admin = user => dispatch => {\n\treturn apiCall('get', `/api/admin/${user.id}`)\n\t.then(function(res) {\n\t\tdispatch(state_get_admin({...user, ...res[0]}));\n\t\treturn {complete: true};\n\t})\n\t.catch(function(err) {\n\t\treturn {complete: false, message: err};\n\t});\n}\n\nexport const db_admin_get_products = data => dispatch => {\n\treturn apiCall('post', `/api/admin/products`, data)\n\t.then(function(res) {\n\t\tdispatch(state_get_admin_data(res));\n\t\treturn {complete: true};\n\t})\n\t.catch(function(err) {\n\t\treturn {complete: false, message: err};\n\t});\n}\n\nexport const db_admin_get_product_options = data => dispatch => {\n\treturn apiCall('get', `/api/admin/products/options`)\n\t.then(function(res) {\n\t\tdispatch(state_get_product_options(res));\n\t\treturn {complete: true};\n\t})\n\t.catch(function(err) {\n\t\treturn {complete: false, message: err};\n\t});\n}\n\nexport const db_add_product = product => dispatch => {\n\treturn apiCall('post', `/api/admin/product/add`, {...product, price: product.price * 100})\n\t.then(function(res) {\n\t\tdispatch(db_admin_get_products({page: 1, amount: 25}))\n\t\treturn {complete: true};\n\t})\n\t.catch(function(err) {\n\t\treturn {complete: false, message: err};\n\t});\n}\n\nexport const db_admin_get_orders = data => dispatch => {\n\treturn apiCall('post', `/api/admin/orders`, data)\n\t.then(function(res) {\n\t\tdispatch(state_get_admin_data(res));\n\t\treturn {complete: true};\n\t})\n\t.catch(function(err) {\n\t\treturn {complete: false, message: err};\n\t});\n}\n\nexport const db_get_export_file = (file_name) => dispatch => {\n\treturn apiCall('get', `/api/admin/export`, { responseType: 'blob' })\n\t.then(function(res) {\n\t\tsaveAs(res, `${file_name}.xlsx`);\n\t\treturn {complete: true};\n\t})\n\t.catch(function(err) {\n\t\tconsole.log(err);\n\t\treturn {complete: false, message: err};\n\t});\n}\n\nexport const db_export_table = (table, filter, file_name) => dispatch => {\n\treturn apiCall('post', `/api/admin/export`, { table: table, filter: filter })\n\t.then(function(res) {\n\t\tdispatch(db_get_export_file(file_name));\n\t\treturn {complete: true};\n\t})\n\t.catch(function(err) {\n\t\treturn {complete: false, message: err};\n\t});\n}\n\nexport const db_update_product_active = data => dispatch => {\n\treturn apiCall('put', `/api/admin/product/status`, data)\n\t.then(function(res) {\n\t\tdispatch(state_update_admin_data(data));\n\t\treturn {complete: true};\n\t})\n\t.catch(function(error) {\n\t\treturn {complete: false, message: error.data.error};\n\t});\n}\n\n"]},"metadata":{},"sourceType":"module"}