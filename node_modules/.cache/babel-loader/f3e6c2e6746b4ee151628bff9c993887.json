{"ast":null,"code":"import _objectSpread from \"/Users/jackjoliet/Documents/marketplace/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"/Users/jackjoliet/Documents/marketplace/front/src/containers/Customer/Account.js\";\nimport React, { Component, Fragment } from 'react';\nimport { Link, withRouter } from 'react-router-dom';\nimport { connect } from \"react-redux\";\nimport empty from 'is-empty';\nimport { logoutUser } from \"../../store/actions/auth\";\nimport { db_update_basic_info, db_change_password } from \"../../store/actions/customers\";\nimport powered from '../../images/stripepowered.png';\nimport Navbar from '../../components/Nav/Navbar';\nimport ErrorBanner from '../../components/Graphics/ErrorBanner';\nimport Loading from '../../components/Graphics/Loading';\nimport PaymentInfo from '../../components/Forms/PaymentInfo';\n\nclass Account extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onChange = e => {\n      this.setState({\n        [e.target.id]: e.target.value,\n        error: ''\n      });\n    };\n\n    this.onSave = async e => {\n      e.preventDefault();\n      this.setState(_objectSpread({}, this.state, {\n        loaded: false\n      }));\n      const resp = await this.props.db_update_basic_info(this.state);\n      this.setState(_objectSpread({}, this.state, {\n        loaded: true,\n        error: resp.complete ? \"\" : resp.message\n      }));\n    };\n\n    this.changePassword = async e => {\n      e.preventDefault();\n      this.setState(_objectSpread({}, this.state, {\n        loaded: false\n      }));\n      const resp = await this.props.db_change_password(this.state);\n      this.setState(_objectSpread({}, this.state, {\n        loaded: true,\n        error: resp.complete ? \"\" : resp.message,\n        password: \"\",\n        oldpassword: \"\",\n        password2: \"\"\n      }));\n    };\n\n    this.state = {\n      id: this.props.user.id,\n      first: this.props.user.first,\n      last: this.props.user.last,\n      email: this.props.user.email,\n      phone: this.props.user.phone,\n      address: this.props.user.address,\n      city: this.props.user.city,\n      state: this.props.user.state,\n      zip: this.props.user.zip,\n      texts: this.props.user.texts,\n      password: \"\",\n      password2: \"\",\n      oldpassword: \"\",\n      error: \"\",\n      loaded: true,\n      cardView: this.props.user.card,\n      section: empty(this.props.match.params) ? \"basic\" : this.props.match.params.section,\n      options: false,\n      small: false\n    };\n  }\n\n  resize() {\n    let currentHideNav = window.innerWidth <= 760;\n\n    if (currentHideNav !== this.state.small) {\n      if (currentHideNav) this.setState({\n        small: true,\n        options: false\n      });\n\n      if (!currentHideNav) {\n        this.setState({\n          small: false,\n          options: true\n        });\n      }\n    }\n  }\n\n  async componentDidMount() {\n    window.addEventListener(\"resize\", this.resize.bind(this));\n    this.resize();\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (!empty(nextProps.match.params)) {\n      if (nextProps.match.params.section != this.props.match.params.section) {\n        this.setState(_objectSpread({}, this.state, {\n          section: nextProps.match.params.section\n        }));\n      }\n    }\n  }\n\n  render() {\n    const _this$state = this.state,\n          section = _this$state.section,\n          options = _this$state.options,\n          small = _this$state.small,\n          cardLoading = _this$state.cardLoading;\n    return React.createElement(Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, React.createElement(Navbar, {\n      active: \"account\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }), !this.state.loaded && React.createElement(Loading, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }), this.state.cardLoading && React.createElement(Loading, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }), !empty(this.state.error) && React.createElement(ErrorBanner, {\n      error: this.state.error,\n      onHide: () => this.setState(_objectSpread({}, this.state, {\n        error: ''\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }), this.state.loaded && React.createElement(\"div\", {\n      className: \"account-container\",\n      style: this.state.cardLoading ? {\n        opacity: 0\n      } : {},\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, options && React.createElement(\"div\", {\n      className: \"account-small-sidebar\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, React.createElement(Link, {\n      className: \"sidebar-row\",\n      style: section == \"basic\" ? {\n        color: \"#3f6bb4\"\n      } : {},\n      to: \"/app/dashboard/account/basic\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, \"Basic Info\"), React.createElement(Link, {\n      className: \"sidebar-row\",\n      style: section == \"payment\" ? {\n        color: \"#3f6bb4\"\n      } : {},\n      to: \"/app/dashboard/account/payment\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, \"Payment Info\"), React.createElement(Link, {\n      className: \"sidebar-row\",\n      style: section == \"password\" ? {\n        color: \"#3f6bb4\"\n      } : {},\n      to: \"/app/dashboard/account/password\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, \"Password Reset\"), React.createElement(\"div\", {\n      className: \"sidebar-row\",\n      style: {\n        fontWeight: \"500\"\n      },\n      onClick: () => {\n        this.props.logoutUser();\n        this.props.history.push('/app');\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, \"Sign Out\")), React.createElement(\"div\", {\n      className: \"account-box\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"account-header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"account-title-div\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"account-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, \"Account\"), React.createElement(\"div\", {\n      className: \"find-options\",\n      onClick: () => this.setState({\n        options: !options\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, React.createElement(\"svg\", {\n      className: \"blue-options\",\n      xmlns: \"http://www.w3.org/2000/svg\",\n      width: \"16\",\n      height: \"16\",\n      viewBox: \"0 0 24 24\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, React.createElement(\"path\", {\n      d: \"M10 18h4v-2h-4v2zM3 6v2h18V6H3zm3 7h12v-2H6v2z\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }), React.createElement(\"path\", {\n      d: \"M0 0h24v24H0z\",\n      fill: \"none\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    })), React.createElement(\"span\", {\n      className: \"options-btn\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, \"Menu\"))), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, \"You can view and edit your account info here.\")), React.createElement(\"div\", {\n      className: \"account-sidebar\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, React.createElement(Link, {\n      className: \"sidebar-row\",\n      style: section == \"basic\" ? {\n        color: \"#3f6bb4\"\n      } : {},\n      to: \"/app/dashboard/account/basic\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, \"Basic Info\"), React.createElement(Link, {\n      className: \"sidebar-row\",\n      style: section == \"payment\" ? {\n        color: \"#3f6bb4\"\n      } : {},\n      to: \"/app/dashboard/account/payment\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, \"Payment Info\"), React.createElement(Link, {\n      className: \"sidebar-row\",\n      style: section == \"password\" ? {\n        color: \"#3f6bb4\"\n      } : {},\n      to: \"/app/dashboard/account/password\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, \"Password Reset\"), React.createElement(\"div\", {\n      style: {\n        flexGrow: \"1\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"sidebar-row\",\n      style: {\n        fontWeight: \"500\",\n        borderTop: \"1px solid rgba(188,190,192,0.5)\",\n        borderBottom: \"none\"\n      },\n      onClick: () => {\n        this.props.logoutUser();\n        this.props.history.push('/app');\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, \"Sign Out\")), React.createElement(\"div\", {\n      className: \"account-body\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, this.state.section == \"basic\" && React.createElement(\"div\", {\n      className: \"basic-info-box\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"account-subtitle\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, \"Basic Info: \"), React.createElement(\"div\", {\n      className: \"input-side-container account-input\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"input-side\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"input-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"field-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, \"First Name\"), React.createElement(\"input\", {\n      type: \"text\",\n      className: \"text-field\",\n      id: \"first\",\n      value: this.state.first,\n      onChange: this.onChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"input-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"field-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, \"Last Name\"), React.createElement(\"input\", {\n      type: \"text\",\n      className: \"text-field\",\n      id: \"last\",\n      value: this.state.last,\n      onChange: this.onChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"input-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"field-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, \"Email\"), React.createElement(\"input\", {\n      type: \"text\",\n      className: \"text-field\",\n      id: \"email\",\n      value: this.state.email,\n      onChange: this.onChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"input-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"field-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, \"Phone\"), React.createElement(\"input\", {\n      type: \"text\",\n      className: \"text-field\",\n      id: \"phone\",\n      value: this.state.phone,\n      onChange: this.onChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"input-side\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"input-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"field-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, \"Address\"), React.createElement(\"input\", {\n      type: \"text\",\n      className: \"text-field\",\n      id: \"address\",\n      value: this.state.address,\n      onChange: this.onChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"input-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"field-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, \"State\"), React.createElement(\"input\", {\n      type: \"text\",\n      className: \"text-field\",\n      id: \"state\",\n      value: this.state.state,\n      onChange: this.onChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"input-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"field-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, \"City\"), React.createElement(\"input\", {\n      type: \"text\",\n      className: \"text-field\",\n      id: \"city\",\n      value: this.state.city,\n      onChange: this.onChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"input-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"field-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, \"Zip\"), React.createElement(\"input\", {\n      type: \"text\",\n      className: \"text-field\",\n      id: \"zip\",\n      value: this.state.zip,\n      onChange: this.onChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }))), React.createElement(\"button\", {\n      className: \"sign-in-btn account-full\",\n      style: small ? {\n        width: \"98%\"\n      } : {},\n      onClick: this.onSave,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, \"Save\"))), section == \"payment\" && React.createElement(\"div\", {\n      className: \"basic-info-box\",\n      style: cardLoading ? {\n        opacity: 0\n      } : {},\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"flex-between\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"account-subtitle\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, \"Payment Info: \"), React.createElement(\"img\", {\n      className: \"stripe-powered-img\",\n      src: powered,\n      alt: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    })), !this.state.cardView && React.createElement(PaymentInfo, {\n      user: this.props.user,\n      onCancel: () => {\n        this.setState(_objectSpread({}, this.state, {\n          cardView: true,\n          cardLoading: false,\n          loaded: true\n        }));\n      },\n      existing: this.props.user.card,\n      onLoading: () => {\n        this.setState(_objectSpread({}, this.state, {\n          cardLoading: true\n        }));\n      },\n      onError: err => {\n        this.setState(_objectSpread({}, this.state, {\n          error: err,\n          loaded: true\n        }));\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }), this.state.cardView && React.createElement(\"div\", {\n      className: \"read-card-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"read-card\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"card-number\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, \"Current Card\"), \": \\u2022\\u2022\\u2022\\u2022 \\u2022\\u2022\\u2022\\u2022 \\u2022\\u2022\\u2022\\u2022 \", this.props.user.last4), React.createElement(\"span\", {\n      className: \"card-exp\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }, \"Exp:\"), \" \", this.props.user.exp)), React.createElement(\"button\", {\n      className: \"sign-in-btn change-card\",\n      onClick: () => {\n        this.setState(_objectSpread({}, this.state, {\n          cardView: false\n        }));\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, \"Change Debit/Credit Card\"))), section == \"password\" && React.createElement(\"div\", {\n      className: \"account-password-box\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"account-subtitle\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }, \"Password Reset: \"), React.createElement(\"div\", {\n      className: \"input-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"field-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }, \"Old Password\"), React.createElement(\"input\", {\n      type: \"password\",\n      className: \"text-field\",\n      id: \"oldpassword\",\n      onChange: this.onChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"input-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"field-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189\n      },\n      __self: this\n    }, \"New Password\"), React.createElement(\"input\", {\n      type: \"password\",\n      className: \"text-field\",\n      id: \"password\",\n      onChange: this.onChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"input-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"field-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }, \"Confirm New Password\"), React.createElement(\"input\", {\n      type: \"password\",\n      className: \"text-field\",\n      id: \"password2\",\n      onChange: this.onChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194\n      },\n      __self: this\n    })), this.state.password != this.state.password2 && React.createElement(\"span\", {\n      style: {\n        color: \"red\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }, \"Passwords don't match\"), React.createElement(\"button\", {\n      className: \"sign-in-btn account\",\n      onClick: this.changePassword,\n      disabled: this.state.password != this.state.password2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197\n      },\n      __self: this\n    }, \"Reset Password\"))))));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  user: state.auth.user,\n  errors: state.errors\n});\n\nexport default connect(mapStateToProps, {\n  logoutUser,\n  db_update_basic_info,\n  db_change_password\n})(withRouter(Account));","map":{"version":3,"sources":["/Users/jackjoliet/Documents/marketplace/front/src/containers/Customer/Account.js"],"names":["React","Component","Fragment","Link","withRouter","connect","empty","logoutUser","db_update_basic_info","db_change_password","powered","Navbar","ErrorBanner","Loading","PaymentInfo","Account","constructor","props","onChange","e","setState","target","id","value","error","onSave","preventDefault","state","loaded","resp","complete","message","changePassword","password","oldpassword","password2","user","first","last","email","phone","address","city","zip","texts","cardView","card","section","match","params","options","small","resize","currentHideNav","window","innerWidth","componentDidMount","addEventListener","bind","componentWillReceiveProps","nextProps","render","cardLoading","opacity","color","fontWeight","history","push","flexGrow","borderTop","borderBottom","width","err","last4","exp","mapStateToProps","auth","errors"],"mappings":"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","sourcesContent":["import React, {Component, Fragment} from 'react';\nimport {Link, withRouter} from 'react-router-dom';\nimport {connect} from \"react-redux\";\n\nimport empty from 'is-empty';\nimport {logoutUser} from \"../../store/actions/auth\";\nimport {db_update_basic_info, db_change_password} from \"../../store/actions/customers\";\n\nimport powered from '../../images/stripepowered.png';\n\nimport Navbar from '../../components/Nav/Navbar';\nimport ErrorBanner from '../../components/Graphics/ErrorBanner';\nimport Loading from '../../components/Graphics/Loading';\nimport PaymentInfo from '../../components/Forms/PaymentInfo';\n\nclass Account extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tid: this.props.user.id,\n\t\t\tfirst: this.props.user.first,\n      last: this.props.user.last,\n      email: this.props.user.email,\n      phone: this.props.user.phone,\n      address: this.props.user.address,\n      city: this.props.user.city,\n      state: this.props.user.state,\n      zip: this.props.user.zip,\n      texts: this.props.user.texts,\n      password: \"\",\n      password2: \"\",\n      oldpassword: \"\",\n      error: \"\",\n      loaded: true,\n      cardView: this.props.user.card,\n      section: empty(this.props.match.params) ? \"basic\" : this.props.match.params.section,\n      options: false,\n      small: false\n\t\t};\n\t}\n\n\tresize() {\n    let currentHideNav = (window.innerWidth <= 760);\n    if (currentHideNav !== this.state.small) {\n        if(currentHideNav) this.setState({small: true, options: false});\n        if(!currentHideNav) {\n\t\t    \tthis.setState({small: false, options: true});\n\t\t    }\n    }\n\t}\n\n\tasync componentDidMount() {\n\t\twindow.addEventListener(\"resize\", this.resize.bind(this));\n    this.resize();\n\t}\n\n\tcomponentWillReceiveProps(nextProps) {\n\t\tif(!empty(nextProps.match.params)) {\n\t\t\tif(nextProps.match.params.section != this.props.match.params.section) {\n\t\t\t\tthis.setState({...this.state, section: nextProps.match.params.section});\n\t\t\t}\n\t\t}\n\t}\n\n  onChange = e => {\n    this.setState({ \n    \t[e.target.id]: e.target.value,\n    \terror: ''\n    });\n  };\n\n  onSave = async e => {\n  \te.preventDefault();\n  \tthis.setState({...this.state, loaded: false});\n  \tconst resp = await this.props.db_update_basic_info(this.state);\n  \tthis.setState({...this.state, loaded: true, error: resp.complete ? \"\" : resp.message});\n  }\n\n  changePassword = async e => {\n  \te.preventDefault();\n  \tthis.setState({...this.state, loaded: false});\n  \tconst resp = await this.props.db_change_password(this.state);\n  \tthis.setState({\n  \t\t...this.state, \n  \t\tloaded: true, \n  \t\terror: resp.complete ? \"\" : resp.message, \n  \t\tpassword: \"\",\n  \t\toldpassword: \"\",\n  \t\tpassword2: \"\"\n  \t});\n  }\n\n\trender() {\n\t\tconst {section, options, small, cardLoading} = this.state;\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<Navbar active=\"account\"/>\n\t\t\t\t{!this.state.loaded && (<Loading />)}\n\t\t\t\t{this.state.cardLoading && (<Loading />)}\n\t\t\t\t{!empty(this.state.error) && (<ErrorBanner error={this.state.error} onHide={() => this.setState({...this.state, error: ''})}/>)}\n\t\t\t\t{this.state.loaded && (<div className=\"account-container\" style={this.state.cardLoading ? {opacity: 0} : {}}>\n\t\t\t\t\t{options && (<div className=\"account-small-sidebar\">\n\t\t\t\t\t\t<Link className=\"sidebar-row\" style={section == \"basic\" ? {color: \"#3f6bb4\"} : {}} to=\"/app/dashboard/account/basic\">Basic Info</Link>\n\t\t\t\t\t\t<Link className=\"sidebar-row\" style={section == \"payment\" ? {color: \"#3f6bb4\"} : {}} to=\"/app/dashboard/account/payment\">Payment Info</Link>\n\t\t\t\t\t\t<Link className=\"sidebar-row\" style={section == \"password\" ? {color: \"#3f6bb4\"} : {}} to=\"/app/dashboard/account/password\">Password Reset</Link>\n\t\t\t\t\t\t<div className=\"sidebar-row\" style={{fontWeight: \"500\"}} onClick={() => {this.props.logoutUser(); this.props.history.push('/app');}}>Sign Out</div>\n\t\t\t\t\t</div>)}\n\t\t\t\t\t<div className=\"account-box\">\n\t\t\t\t\t\t<div className=\"account-header\">\n\t\t\t\t\t\t\t<div className=\"account-title-div\">\n\t\t\t\t\t\t\t\t<span className=\"account-title\">Account</span>\n\t\t\t\t\t\t\t\t<div className=\"find-options\" onClick={() => this.setState({options: !options})}><svg className=\"blue-options\" xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path d=\"M10 18h4v-2h-4v2zM3 6v2h18V6H3zm3 7h12v-2H6v2z\"/><path d=\"M0 0h24v24H0z\" fill=\"none\"/></svg><span className=\"options-btn\">Menu</span></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<span>You can view and edit your account info here.</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"account-sidebar\">\n\t\t\t\t\t\t\t<Link className=\"sidebar-row\" style={section == \"basic\" ? {color: \"#3f6bb4\"} : {}} to=\"/app/dashboard/account/basic\">Basic Info</Link>\n\t\t\t\t\t\t\t<Link className=\"sidebar-row\" style={section == \"payment\" ? {color: \"#3f6bb4\"} : {}} to=\"/app/dashboard/account/payment\">Payment Info</Link>\n\t\t\t\t\t\t\t<Link className=\"sidebar-row\" style={section == \"password\" ? {color: \"#3f6bb4\"} : {}} to=\"/app/dashboard/account/password\">Password Reset</Link>\n\t\t\t\t\t\t\t<div style={{flexGrow: \"1\"}}></div>\n\t\t\t\t\t\t\t<div className=\"sidebar-row\" style={{fontWeight: \"500\", borderTop: \"1px solid rgba(188,190,192,0.5)\", borderBottom: \"none\"}} onClick={() => {this.props.logoutUser(); this.props.history.push('/app');}}>Sign Out</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"account-body\">\n\t\t\t\t\t\t\t{this.state.section == \"basic\" && (<div className=\"basic-info-box\">\n\t\t\t\t\t\t\t\t<span className=\"account-subtitle\">Basic Info: </span>\n\t\t\t\t\t\t\t\t<div className=\"input-side-container account-input\">\n\t\t\t\t\t\t\t\t\t<div className=\"input-side\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"input-group\">\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"field-label\">First Name</span>\n\t\t\t\t\t\t\t\t\t\t\t<input type=\"text\" className=\"text-field\" id=\"first\" value={this.state.first} onChange={this.onChange}/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"input-group\">\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"field-label\">Last Name</span>\n\t\t\t\t\t\t\t\t\t\t\t<input type=\"text\" className=\"text-field\" id=\"last\" value={this.state.last} onChange={this.onChange}/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"input-group\">\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"field-label\">Email</span>\n\t\t\t\t\t\t\t\t\t\t\t<input type=\"text\" className=\"text-field\" id=\"email\" value={this.state.email} onChange={this.onChange}/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"input-group\">\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"field-label\">Phone</span>\n\t\t\t\t\t\t\t\t\t\t\t<input type=\"text\" className=\"text-field\" id=\"phone\" value={this.state.phone} onChange={this.onChange}/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"input-side\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"input-group\">\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"field-label\">Address</span>\n\t\t\t\t\t\t\t\t\t\t\t<input type=\"text\" className=\"text-field\" id=\"address\" value={this.state.address} onChange={this.onChange}/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"input-group\">\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"field-label\">State</span>\n\t\t\t\t\t\t\t\t\t\t\t<input type=\"text\" className=\"text-field\" id=\"state\" value={this.state.state} onChange={this.onChange}/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"input-group\">\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"field-label\">City</span>\n\t\t\t\t\t\t\t\t\t\t\t<input type=\"text\" className=\"text-field\" id=\"city\" value={this.state.city} onChange={this.onChange}/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"input-group\">\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"field-label\">Zip</span>\n\t\t\t\t\t\t\t\t\t\t\t<input type=\"text\" className=\"text-field\" id=\"zip\" value={this.state.zip} onChange={this.onChange}/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<button className=\"sign-in-btn account-full\" style={small ? {width: \"98%\"} :{}} onClick={this.onSave}>Save</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>)}\n\t\t\t\t\t\t\t{section == \"payment\" && (<div className=\"basic-info-box\" style={cardLoading ? {opacity: 0} : {}}>\n\t\t\t\t\t\t\t\t<div className=\"flex-between\">\n\t\t\t\t\t\t\t\t\t<span className=\"account-subtitle\">Payment Info: </span>\n\t\t\t\t\t\t\t\t\t<img className=\"stripe-powered-img\" src={powered} alt=\"\"/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{!this.state.cardView && (<PaymentInfo user={this.props.user} onCancel={() => {this.setState({...this.state, cardView: true, cardLoading: false, loaded: true})}} existing={this.props.user.card} onLoading={() => {this.setState({...this.state, cardLoading: true})}} onError={(err) => {this.setState({...this.state, error: err, loaded: true})}}/>)}\n\t\t\t\t\t\t\t\t{this.state.cardView && (\n\t\t\t\t\t\t\t\t\t<div className=\"read-card-container\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"read-card\">\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"card-number\"><strong>Current Card</strong>: •••• •••• •••• {this.props.user.last4}</span>\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"card-exp\"><strong>Exp:</strong> {this.props.user.exp}</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<button className=\"sign-in-btn change-card\" onClick={() => {this.setState({...this.state, cardView: false})}}>Change Debit/Credit Card</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>)}\n\t\t\t\t\t\t\t{section == \"password\" && (<div className=\"account-password-box\">\n\t\t\t\t\t\t\t\t<span className=\"account-subtitle\">Password Reset: </span>\n\t\t\t\t\t\t\t\t<div className=\"input-group\">\n\t\t\t\t\t\t\t\t\t<span className=\"field-label\">Old Password</span>\n\t\t\t\t\t\t\t\t\t<input type=\"password\" className=\"text-field\" id=\"oldpassword\" onChange={this.onChange}/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"input-group\">\n\t\t\t\t\t\t\t\t\t<span className=\"field-label\">New Password</span>\n\t\t\t\t\t\t\t\t\t<input type=\"password\" className=\"text-field\" id=\"password\" onChange={this.onChange}/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"input-group\">\n\t\t\t\t\t\t\t\t\t<span className=\"field-label\">Confirm New Password</span>\n\t\t\t\t\t\t\t\t\t<input type=\"password\" className=\"text-field\" id=\"password2\" onChange={this.onChange}/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{this.state.password != this.state.password2 && (<span style={{color: \"red\"}}>Passwords don't match</span>)}\n\t\t\t\t\t\t\t\t<button className=\"sign-in-btn account\" onClick={this.changePassword} disabled={this.state.password != this.state.password2}>Reset Password</button>\n\t\t\t\t\t\t\t</div>)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>)}\n\t\t\t</Fragment>\n\t\t)\n\t}\n}\n\nconst mapStateToProps = state => ({\n  user: state.auth.user,\n  errors: state.errors\n});\n\nexport default connect(mapStateToProps,{logoutUser, db_update_basic_info, db_change_password})(withRouter(Account));\n"]},"metadata":{},"sourceType":"module"}