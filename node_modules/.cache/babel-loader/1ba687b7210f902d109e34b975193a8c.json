{"ast":null,"code":"import _objectSpread from \"/Users/jackjoliet/Documents/marketplace/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"/Users/jackjoliet/Documents/marketplace/front/src/containers/Customer/Book.js\";\nimport React, { Component, Fragment } from 'react';\nimport { Link, withRouter } from 'react-router-dom';\nimport { connect } from \"react-redux\";\nimport moment from 'moment';\nimport empty from 'is-empty';\nimport { jobtypes } from '../../utils/options';\nimport { db_add_job, db_get_all_paid_jobs } from '../../store/actions/jobs';\nimport { db_get_workers_by_loc } from '../../store/actions/workers';\nimport validator from 'validator';\nimport { states } from '../../utils/options';\nimport checkTrue from '../../utils/checkTrue';\nimport { WORKER_RATE } from '../../utils/constants';\nimport flowers from '../../images/flowers.jpeg';\nimport powered from '../../images/stripepowered.png';\nimport Navbar from '../../components/Nav/Navbar';\nimport DatePicker from '../../components/Forms/DatePicker';\nimport TimePick from '../../components/Forms/TimePick';\nimport Dropdown from '../../components/Forms/Dropdown';\nimport AddressBlock from '../../components/Forms/AddressBlock';\nimport CostEstimate from '../../components/Graphics/CostEstimate';\nimport Loading from '../../components/Graphics/Loading';\nimport PaymentInfo from '../../components/Forms/PaymentInfo';\nimport ErrorBanner from '../../components/Graphics/ErrorBanner';\n\nclass Book extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onChange = e => {\n      this.setState({\n        data: _objectSpread({}, this.state.data, {\n          [e.target.id]: e.target.value\n        })\n      });\n    };\n\n    this.onNumChange = e => {\n      let num = e.target.value > 4 ? 4 : e.target.value < 1 ? '' : Math.floor(e.target.value);\n      this.setState(_objectSpread({}, this.state, {\n        data: _objectSpread({}, this.state.data, {\n          workers: num\n        })\n      }));\n    };\n\n    this.handleDateChange = day => {\n      const data = this.state.data;\n      const now = moment().hour() * 60 + moment().minute();\n      const ok = empty(data.time) ? true : moment(moment(day).format(\"YYYY-MM-DD\")).isoWeekday() < 6 ? data.time >= 900 && data.time <= 1200 : data.time >= 480 && data.time <= 1200;\n      const timeok = empty(data.time) ? true : moment(day).isSame(moment(new Date()), 'day') ? data.time > now : true;\n\n      if (moment(day).isSameOrAfter(moment(new Date()).startOf('day'))) {\n        this.setState(_objectSpread({}, this.state, {\n          data: _objectSpread({}, this.state.data, {\n            date: moment(day).format(\"YYYY-MM-DD\"),\n            same_day: moment(day).isSame(moment(new Date()), 'day')\n          }),\n          validation: _objectSpread({}, this.state.validation, {\n            date: true,\n            time: ok,\n            same_day_time: timeok\n          })\n        }));\n      } else {\n        this.setState(_objectSpread({}, this.state, {\n          data: _objectSpread({}, this.state.data, {\n            date: ''\n          }),\n          validation: _objectSpread({}, this.state.validation, {\n            date: false\n          })\n        }));\n      }\n    };\n\n    this.handleTimeChange = time => {\n      let t = empty(time) ? null : moment(time).hour() * 60 + moment(time).minute();\n      const now = moment().hour() * 60 + moment().minute();\n      const ok = empty(t) ? true : moment(this.state.data.date).isoWeekday() < 6 ? t >= 900 && t <= 1200 : t >= 480 && t <= 1200;\n      const sameday = empty(t) ? true : this.state.data.same_day ? t > now : true;\n      this.setState(_objectSpread({}, this.state, {\n        data: _objectSpread({}, this.state.data, {\n          time: t\n        }),\n        validation: _objectSpread({}, this.state.validation, {\n          time: ok,\n          same_day_time: sameday\n        })\n      }));\n    };\n\n    this.onPhoneChange = e => {\n      const ok = validator.isMobilePhone(e.target.value, 'en-US');\n      this.setState(_objectSpread({}, this.state, {\n        data: _objectSpread({}, this.state.data, {\n          phone: e.target.value\n        }),\n        validation: _objectSpread({}, this.state.validation, {\n          phone: ok\n        })\n      }));\n    };\n\n    this.onStateChange = e => {\n      const ok = states.includes(e.target.value.toUpperCase());\n      this.setState(_objectSpread({}, this.state, {\n        data: _objectSpread({}, this.state.data, {\n          state: e.target.value\n        }),\n        validation: _objectSpread({}, this.state.validation, {\n          state: ok\n        })\n      }));\n    };\n\n    this.handleJobChange = value => {\n      this.setState(_objectSpread({}, this.state, {\n        data: _objectSpread({}, this.state.data, {\n          type: empty(value) ? null : value.value\n        }),\n        selectedType: value\n      }));\n    };\n\n    this.checkEmpties = () => {\n      let arr = [];\n      const data = this.state.data;\n\n      for (var key in data) {\n        if (empty(data[key])) {\n          arr.push(key);\n        }\n      }\n\n      if (empty(arr)) {\n        return true;\n      } else {\n        this.setState(_objectSpread({}, this.state, {\n          empties: arr\n        }));\n        return false;\n      }\n    };\n\n    this.onSubmit = async e => {\n      e.preventDefault();\n      await this.setState(_objectSpread({}, this.state, {\n        empties: [],\n        loaded: false\n      }));\n      const empties = await this.checkEmpties();\n\n      if (empties && checkTrue(this.state.validation)) {\n        const resp = await this.props.db_add_job(this.state.data);\n        resp.complete ? this.props.history.push('/app/dashboard/manage') : console.log(resp.message);\n      }\n\n      this.setState(_objectSpread({}, this.state, {\n        date: this.state.date,\n        type: this.state.type,\n        loaded: true\n      }));\n    };\n\n    this.state = {\n      data: {\n        customer_id: this.props.auth.user.id,\n        date: null,\n        time: 0,\n        phone: this.props.auth.user.phone,\n        address: this.props.auth.user.address,\n        city: this.props.auth.user.city,\n        state: this.props.auth.user.state,\n        zip: this.props.auth.user.zip,\n        type: '',\n        description: '',\n        hours: '',\n        workers: 1,\n        same_day: false\n      },\n      validation: {\n        date: true,\n        time: true,\n        phone: true,\n        state: true,\n        same_day_time: true\n      },\n      empties: [],\n      small: false,\n      loaded: false,\n      selectedType: null,\n      needsPayment: {},\n      noworkers: false,\n      needCard: false,\n      cardLoading: false,\n      success: \"\",\n      error: \"\"\n    };\n  }\n\n  resize() {\n    let currentHideNav = window.innerWidth <= 760;\n\n    if (currentHideNav !== this.state.small) {\n      if (currentHideNav) this.setState({\n        small: true\n      });\n\n      if (!currentHideNav) {\n        this.setState({\n          small: false\n        });\n      }\n    }\n  }\n\n  async componentDidMount() {\n    window.addEventListener(\"resize\", this.resize.bind(this));\n    this.resize();\n    const worker_count = await db_get_workers_by_loc({\n      lat: this.props.auth.user.lat,\n      lon: this.props.auth.user.lon\n    });\n    const needsPay = await db_get_all_paid_jobs(this.props.auth.user.id);\n    this.setState(_objectSpread({}, this.state, {\n      loaded: true,\n      needsPayment: needsPay.complete ? needsPay.data : {},\n      noworkers: empty(worker_count.count)\n    }));\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setState(_objectSpread({}, this.state, {\n      data: _objectSpread({}, this.state.data, {\n        customer_id: nextProps.auth.user.id,\n        phone: nextProps.auth.user.phone,\n        address: nextProps.auth.user.address,\n        city: nextProps.auth.user.city,\n        state: nextProps.auth.user.state,\n        zip: nextProps.auth.user.zip\n      })\n    }));\n  }\n\n  render() {\n    const _this$state = this.state,\n          data = _this$state.data,\n          validation = _this$state.validation,\n          empties = _this$state.empties,\n          selectedType = _this$state.selectedType,\n          needsPayment = _this$state.needsPayment,\n          noworkers = _this$state.noworkers,\n          needCard = _this$state.needCard,\n          cardLoading = _this$state.cardLoading;\n    return React.createElement(Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257\n      },\n      __self: this\n    }, React.createElement(Navbar, {\n      active: \"book\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258\n      },\n      __self: this\n    }), !this.state.loaded && React.createElement(Loading, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259\n      },\n      __self: this\n    }), this.state.cardLoading && React.createElement(Loading, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260\n      },\n      __self: this\n    }), !empty(this.state.success) && React.createElement(ErrorBanner, {\n      style: {\n        background: \"green\"\n      },\n      error: this.state.success,\n      onHide: () => this.setState(_objectSpread({}, this.state, {\n        success: ''\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261\n      },\n      __self: this\n    }), !empty(this.state.error) && React.createElement(ErrorBanner, {\n      error: this.state.error,\n      onHide: () => this.setState(_objectSpread({}, this.state, {\n        error: ''\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262\n      },\n      __self: this\n    }), this.state.loaded && React.createElement(Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263\n      },\n      __self: this\n    }, !noworkers && empty(needsPayment) && !needCard && React.createElement(\"div\", {\n      className: \"sign-in-container no-back\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"book-box-img\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      className: \"book-header-img\",\n      src: flowers,\n      alt: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"book-title-div\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"book-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267\n      },\n      __self: this\n    }, \"BOOK A JOB\")), React.createElement(\"div\", {\n      className: \"sign-up-box\",\n      style: {\n        width: \"100%\",\n        margin: \"0\",\n        borderRadius: \"0px\",\n        boxShadow: \"none\",\n        paddingTop: \"1rem\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 268\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"input-horiz-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"input-side-container\",\n      style: {\n        width: this.state.small ? \"100%\" : \"38%\",\n        flexDirection: \"column\",\n        justifyContent: \"flex-start\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"book-subtitle\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271\n      },\n      __self: this\n    }, \"Customer Info\"), React.createElement(\"div\", {\n      className: \"input-side\",\n      style: {\n        width: \"100%\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 272\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"input-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 273\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"field-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 274\n      },\n      __self: this\n    }, \"Phone\"), !validation.phone && React.createElement(\"span\", {\n      className: \"form-error\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 275\n      },\n      __self: this\n    }, \"Enter a valid phone number.\"), React.createElement(\"input\", {\n      type: \"text\",\n      className: \"text-field\",\n      id: \"phone\",\n      onChange: this.onPhoneChange,\n      value: data.phone,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 276\n      },\n      __self: this\n    }), empties.includes(\"phone\") && React.createElement(\"span\", {\n      className: \"form-error\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 277\n      },\n      __self: this\n    }, \"You must enter a phone number.\")), React.createElement(AddressBlock, {\n      onChange: this.onChange,\n      onStateChange: this.onStateChange,\n      state: this.state,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279\n      },\n      __self: this\n    }))), this.state.small && React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 282\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"input-side-container\",\n      style: {\n        width: this.state.small ? \"100%\" : \"58%\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 283\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"book-subtitle\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 284\n      },\n      __self: this\n    }, \"Job Info\"), React.createElement(\"div\", {\n      className: \"input-side\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 285\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"input-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 286\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"field-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 287\n      },\n      __self: this\n    }, \"Date\"), !validation.date && React.createElement(\"span\", {\n      className: \"form-error\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 288\n      },\n      __self: this\n    }, \"You cannot select a date in the past.\"), React.createElement(DatePicker, {\n      onChange: this.handleDateChange,\n      value: empty(data.date) ? null : data.date,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 289\n      },\n      __self: this\n    }), empties.includes(\"date\") && React.createElement(\"span\", {\n      className: \"form-error\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 290\n      },\n      __self: this\n    }, \"You must enter a date.\")), React.createElement(\"div\", {\n      className: \"input-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 292\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"field-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 293\n      },\n      __self: this\n    }, \"Time \", React.createElement(\"span\", {\n      style: {\n        fontSize: \"0.6rem\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 293\n      },\n      __self: this\n    }, \"(M-F 3-8pm, Sat-Sun 8am-8pm)\")), !validation.same_day_time && React.createElement(\"span\", {\n      className: \"form-error\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 294\n      },\n      __self: this\n    }, \"You cannot book a job in the past.\"), !validation.time && React.createElement(\"span\", {\n      className: \"form-error\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 295\n      },\n      __self: this\n    }, \"Select a time compliant with (M-F 3-8pm, Sat-Sun 8am-8pm).\"), React.createElement(TimePick, {\n      onChange: this.handleTimeChange,\n      value: empty(data.time) ? null : moment.utc().startOf('day').add(data.time, 'minutes'),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 296\n      },\n      __self: this\n    }), empties.includes(\"time\") && React.createElement(\"span\", {\n      className: \"form-error\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 297\n      },\n      __self: this\n    }, \"You must enter a time.\"))), React.createElement(\"div\", {\n      className: \"input-side\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 300\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"input-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 301\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"field-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 302\n      },\n      __self: this\n    }, \"Estimated Hours\"), React.createElement(\"input\", {\n      min: \"0\",\n      type: \"number\",\n      className: \"text-field\",\n      id: \"hours\",\n      onChange: this.onChange,\n      value: data.hours,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 303\n      },\n      __self: this\n    }), empties.includes(\"hours\") && React.createElement(\"span\", {\n      className: \"form-error\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 304\n      },\n      __self: this\n    }, \"You must enter estimated hours.\")), React.createElement(\"div\", {\n      className: \"input-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 306\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"field-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 307\n      },\n      __self: this\n    }, \"Workers (1-4)\"), React.createElement(\"input\", {\n      pattern: \"[0-9]\",\n      type: \"number\",\n      step: \"1\",\n      min: \"1\",\n      max: \"4\",\n      className: \"text-field\",\n      id: \"workers\",\n      onChange: this.onNumChange,\n      value: data.workers,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 308\n      },\n      __self: this\n    }), empties.includes(\"workers\") && React.createElement(\"span\", {\n      className: \"form-error\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 309\n      },\n      __self: this\n    }, \"You must enter the number of workers you need.\"))), React.createElement(\"div\", {\n      className: \"input-side horiz-flex\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 312\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"input-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 313\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"field-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 314\n      },\n      __self: this\n    }, \"Job Type\"), React.createElement(Dropdown, {\n      options: jobtypes,\n      onChange: this.handleJobChange,\n      value: selectedType,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 315\n      },\n      __self: this\n    }), empties.includes(\"type\") && React.createElement(\"span\", {\n      className: \"form-error\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 316\n      },\n      __self: this\n    }, \"You must enter a job type.\")), React.createElement(\"div\", {\n      className: \"input-group\",\n      style: {\n        fontSize: \"0.7rem\",\n        color: \"#3f6bb4\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 318\n      },\n      __self: this\n    }, \"NOTE: The following jobs are not offered: Electrical Work, Plumbing, Painting, and Carpentry.\")), React.createElement(\"div\", {\n      className: \"input-group bottom-form\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 323\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"field-label\",\n      style: {\n        marginBottom: \"0\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 324\n      },\n      __self: this\n    }, \"Description\"), React.createElement(\"span\", {\n      style: {\n        fontSize: \"0.8rem\",\n        marginBottom: \"0.3rem\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 325\n      },\n      __self: this\n    }, \"Tell us about your job.\"), React.createElement(\"textarea\", {\n      type: \"text\",\n      className: \"description-field\",\n      id: \"description\",\n      onChange: this.onChange,\n      value: data.description,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 326\n      },\n      __self: this\n    }), empties.includes(\"description\") && React.createElement(\"span\", {\n      className: \"form-error\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 327\n      },\n      __self: this\n    }, \"You must enter a description.\")))), React.createElement(\"div\", {\n      className: \"bottom-form\",\n      style: {\n        fontWeight: \"500\",\n        fontSize: \"1.2rem\",\n        width: \"100%\",\n        marginTop: \"0.5rem\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 331\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"customer-info-text estimate\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 332\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 332\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 332\n      },\n      __self: this\n    }, \"ESTIMATED COST:\")), \" \", React.createElement(CostEstimate, {\n      job: data,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 332\n      },\n      __self: this\n    }))), data.same_day && React.createElement(\"div\", {\n      className: \"bottom-form\",\n      style: {\n        fontSize: \"1rem\",\n        width: \"100%\",\n        marginTop: \"0.25rem\",\n        color: \"red\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 334\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 335\n      },\n      __self: this\n    }, \"WARNING: \"), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 336\n      },\n      __self: this\n    }, \"Because you are booking a job to be completed today, it is less likely that your job will be fulfilled.\")), React.createElement(\"button\", {\n      className: \"sign-in-btn bottom-form\",\n      type: \"submit\",\n      onClick: this.props.auth.user.card ? this.onSubmit : () => this.setState(_objectSpread({}, this.state, {\n        needCard: true\n      })),\n      disabled: !this.state.loaded,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 338\n      },\n      __self: this\n    }, \"Confirm\")))), needCard && React.createElement(\"div\", {\n      className: \"sign-in-container no-card\",\n      style: cardLoading ? {\n        opacity: 0\n      } : {},\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 343\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"sign-up-box\",\n      style: {\n        width: \"50rem\",\n        borderRadius: \"0px\",\n        marginTop: \"0\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 344\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"sign-in-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 345\n      },\n      __self: this\n    }, \"Before you continue...\"), React.createElement(\"div\", {\n      style: {\n        textAlign: \"left\",\n        fontSize: \"1rem\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 346\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      style: {\n        fontSize: \"1.1rem\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 347\n      },\n      __self: this\n    }, \"There needs to be a credit card on file in order to finish booking your job. Don't worry, you won\\u2019t be charged until the job is complete.\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 348\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 348\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      style: {\n        fontSize: \"1.1rem\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 349\n      },\n      __self: this\n    }, \"Why do I need to add a Credit Card?: \"), React.createElement(\"ul\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 350\n      },\n      __self: this\n    }, React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 351\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 351\n      },\n      __self: this\n    }, \"Seamless Security:\"), \" Allows us to verify your account\"), React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 352\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 352\n      },\n      __self: this\n    }, \"Simplified Payment:\"), \" Pay and sign at the job site without having to use cash\"), React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 353\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 353\n      },\n      __self: this\n    }, \"Not Home? No Problem:\"), \" Allows for an invoice to be sent if you aren't home\"))), React.createElement(\"img\", {\n      className: \"stripe-powered-img\",\n      src: powered,\n      alt: \"\",\n      style: {\n        alignSelf: \"flex-start\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 356\n      },\n      __self: this\n    }), React.createElement(PaymentInfo, {\n      user: this.props.auth.user,\n      onCancel: () => {\n        this.setState(_objectSpread({}, this.state, {\n          loaded: true,\n          cardLoading: false,\n          needCard: false,\n          success: \"Your card has been successfully linked to your profile.\"\n        }));\n      },\n      onLoading: () => {\n        this.setState(_objectSpread({}, this.state, {\n          cardLoading: true\n        }));\n      },\n      onError: err => {\n        this.setState(_objectSpread({}, this.state, {\n          error: err,\n          loaded: true\n        }));\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 357\n      },\n      __self: this\n    }))), !empty(needsPayment) && React.createElement(\"div\", {\n      className: \"sign-in-container no-card\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 362\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"sign-up-box\",\n      style: {\n        width: \"50rem\",\n        borderRadius: \"0px\",\n        marginTop: \"0\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 363\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"sign-in-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 364\n      },\n      __self: this\n    }, \"Before you continue...\"), React.createElement(\"div\", {\n      style: {\n        textAlign: \"left\",\n        fontSize: \"1rem\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 365\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      style: {\n        fontSize: \"1.1rem\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 366\n      },\n      __self: this\n    }, \"You have an outstanding payment that you need to complete. Click the link below to pay for the job.\")), React.createElement(\"a\", {\n      className: \"book-now-btn\",\n      href: needsPayment.invoice_url,\n      style: {\n        marginTop: \"1rem\"\n      },\n      target: \"_blank\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 368\n      },\n      __self: this\n    }, \"PAY FOR JOB\"))), noworkers && React.createElement(\"div\", {\n      className: \"sign-in-container no-card\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 373\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"sign-up-box\",\n      style: {\n        width: \"50rem\",\n        borderRadius: \"0px\",\n        marginTop: \"0\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 374\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"sign-in-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 375\n      },\n      __self: this\n    }, \"No workers in the area :(\"), React.createElement(\"div\", {\n      style: {\n        textAlign: \"left\",\n        fontSize: \"1rem\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 376\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      style: {\n        fontSize: \"1.1rem\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 377\n      },\n      __self: this\n    }, \"Unfortunately, there are no workers signed up in your immediate vicinity. Therefore, we cannot let you book a job because there will be no workers to accept it. We look forward to serving you soon!\"))))));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  auth: state.auth\n});\n\nexport default connect(mapStateToProps, {\n  db_add_job\n})(withRouter(Book));","map":{"version":3,"sources":["/Users/jackjoliet/Documents/marketplace/front/src/containers/Customer/Book.js"],"names":["React","Component","Fragment","Link","withRouter","connect","moment","empty","jobtypes","db_add_job","db_get_all_paid_jobs","db_get_workers_by_loc","validator","states","checkTrue","WORKER_RATE","flowers","powered","Navbar","DatePicker","TimePick","Dropdown","AddressBlock","CostEstimate","Loading","PaymentInfo","ErrorBanner","Book","constructor","props","onChange","e","setState","data","state","target","id","value","onNumChange","num","Math","floor","workers","handleDateChange","day","now","hour","minute","ok","time","format","isoWeekday","timeok","isSame","Date","isSameOrAfter","startOf","date","same_day","validation","same_day_time","handleTimeChange","t","sameday","onPhoneChange","isMobilePhone","phone","onStateChange","includes","toUpperCase","handleJobChange","type","selectedType","checkEmpties","arr","key","push","empties","onSubmit","preventDefault","loaded","resp","complete","history","console","log","message","customer_id","auth","user","address","city","zip","description","hours","small","needsPayment","noworkers","needCard","cardLoading","success","error","resize","currentHideNav","window","innerWidth","componentDidMount","addEventListener","bind","worker_count","lat","lon","needsPay","count","componentWillReceiveProps","nextProps","render","background","width","margin","borderRadius","boxShadow","paddingTop","flexDirection","justifyContent","fontSize","utc","add","color","marginBottom","fontWeight","marginTop","card","opacity","textAlign","alignSelf","err","invoice_url","mapStateToProps"],"mappings":"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","sourcesContent":["import React, {Component, Fragment} from 'react';\nimport {Link, withRouter} from 'react-router-dom';\nimport {connect} from \"react-redux\";\nimport moment from 'moment';\nimport empty from 'is-empty';\nimport {jobtypes} from '../../utils/options';\nimport {db_add_job, db_get_all_paid_jobs} from '../../store/actions/jobs';\nimport {db_get_workers_by_loc} from '../../store/actions/workers';\nimport validator from 'validator';\nimport {states} from '../../utils/options';\nimport checkTrue from '../../utils/checkTrue';\nimport {WORKER_RATE} from '../../utils/constants';\n\nimport flowers from '../../images/flowers.jpeg';\nimport powered from '../../images/stripepowered.png';\n\nimport Navbar from '../../components/Nav/Navbar';\nimport DatePicker from '../../components/Forms/DatePicker';\nimport TimePick from '../../components/Forms/TimePick';\nimport Dropdown from '../../components/Forms/Dropdown';\nimport AddressBlock from '../../components/Forms/AddressBlock';\nimport CostEstimate from '../../components/Graphics/CostEstimate';\nimport Loading from '../../components/Graphics/Loading';\nimport PaymentInfo from '../../components/Forms/PaymentInfo';\nimport ErrorBanner from '../../components/Graphics/ErrorBanner';\n\nclass Book extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tdata: {\n\t\t\t\tcustomer_id: this.props.auth.user.id,\n\t\t\t\tdate: null,\n\t\t\t\ttime: 0,\n\t\t\t\tphone: this.props.auth.user.phone,\n\t\t\t\taddress: this.props.auth.user.address,\n\t\t\t\tcity: this.props.auth.user.city,\n\t\t\t\tstate: this.props.auth.user.state,\n\t\t\t\tzip: this.props.auth.user.zip,\n\t\t\t\ttype: '',\n\t\t\t\tdescription: '',\n\t\t\t\thours: '',\n\t\t\t\tworkers: 1,\n\t\t\t\tsame_day: false\n\t\t\t},\n\t\t\tvalidation: {\n\t\t\t\tdate: true,\n\t\t\t\ttime: true,\n\t\t\t\tphone: true,\n\t\t\t\tstate: true,\n\t\t\t\tsame_day_time: true\n\t\t\t},\n\t\t\tempties: [],\n\t\t\tsmall: false,\n\t\t\tloaded: false,\n\t\t\tselectedType: null,\n\t\t\tneedsPayment: {},\n\t\t\tnoworkers: false,\n\t\t\tneedCard: false,\n\t\t\tcardLoading: false,\n\t\t\tsuccess: \"\",\n\t\t\terror: \"\"\n\t\t};\n\t}\n\n\tresize() {\n    let currentHideNav = (window.innerWidth <= 760);\n    if (currentHideNav !== this.state.small) {\n        if(currentHideNav) this.setState({small: true});\n        if(!currentHideNav) {\n\t\t    \tthis.setState({small: false});\n\t\t    }\n    }\n\t}\n\n\tasync componentDidMount() {\n\t\twindow.addEventListener(\"resize\", this.resize.bind(this));\n    this.resize();\n    const worker_count = await db_get_workers_by_loc({lat: this.props.auth.user.lat, lon: this.props.auth.user.lon});\n    const needsPay = await db_get_all_paid_jobs(this.props.auth.user.id);\n    this.setState({...this.state, loaded: true, needsPayment: needsPay.complete ? needsPay.data : {}, noworkers: empty(worker_count.count)});\n\t}\n\n\tcomponentWillReceiveProps(nextProps) {\n  \tthis.setState({\n  \t\t...this.state,\n  \t\tdata: {\n  \t\t\t...this.state.data,\n  \t\t\tcustomer_id: nextProps.auth.user.id,\n\t  \t\tphone: nextProps.auth.user.phone,\n\t\t\t\taddress: nextProps.auth.user.address,\n\t\t\t\tcity: nextProps.auth.user.city,\n\t\t\t\tstate: nextProps.auth.user.state,\n\t\t\t\tzip: nextProps.auth.user.zip\n  \t\t}\n  \t})\n  }\n\n  onChange = e => {\n    this.setState({\n    \tdata: {\n    \t\t...this.state.data,\n    \t\t[e.target.id]: e.target.value \n    \t} \n    });\n  };\n\n  onNumChange = e => {\n  \tlet num = e.target.value > 4 ? 4 : e.target.value < 1 ? '' : Math.floor(e.target.value);\n  \tthis.setState({\n  \t\t...this.state,\n  \t\tdata: {\n  \t\t\t...this.state.data,\n  \t\t\tworkers: num\n  \t\t}\n  \t})\n  }\n\n  handleDateChange = day => {\n  \tconst {data} = this.state;\n  \tconst now = (moment().hour()*60) + moment().minute();\n  \tconst ok = empty(data.time) ? true : (moment(moment(day).format(\"YYYY-MM-DD\")).isoWeekday() < 6) ? (data.time >= 900 && data.time <= 1200) : (data.time >= 480 && data.time <= 1200);\n  \tconst timeok = empty(data.time) ? true : moment(day).isSame(moment(new Date()), 'day') ? (data.time > now) : true;\n  \tif(moment(day).isSameOrAfter(moment(new Date()).startOf('day'))) {\n  \t\tthis.setState({\n\t  \t\t...this.state,\n\t  \t\tdata: {\n\t  \t\t\t...this.state.data,\n\t  \t\t\tdate: moment(day).format(\"YYYY-MM-DD\"),\n\t  \t\t\tsame_day: moment(day).isSame(moment(new Date()), 'day')\n\t  \t\t},\n\t  \t\tvalidation: {\n\t  \t\t\t...this.state.validation,\n\t  \t\t\tdate: true,\n\t  \t\t\ttime: ok,\n\t  \t\t\tsame_day_time: timeok\n\t  \t\t}\n\t  \t});\n  \t} else {\n  \t\tthis.setState({\n\t  \t\t...this.state,\n\t  \t\tdata: {\n\t  \t\t\t...this.state.data,\n\t  \t\t\tdate: '',\n\t  \t\t},\n\t  \t\tvalidation: {\n\t  \t\t\t...this.state.validation,\n\t  \t\t\tdate: false\n\t  \t\t}\n\t  \t});\n  \t}\n  \t\n  }\n\n  handleTimeChange = time => {\n  \tlet t = empty(time) ? null : moment(time).hour()*60 + moment(time).minute();\n  \tconst now = (moment().hour()*60) + moment().minute();\n  \tconst ok = empty(t) ? true : (moment(this.state.data.date).isoWeekday() < 6) ? (t >= 900 && t <= 1200) : (t >= 480 && t <= 1200);\n  \tconst sameday = empty(t) ? true : this.state.data.same_day ? (t > now) : true;\n  \tthis.setState({\n  \t\t...this.state,\n  \t\tdata: {\n  \t\t\t...this.state.data,\n  \t\t\ttime: t\n  \t\t},\n  \t\tvalidation: {\n  \t\t\t...this.state.validation,\n  \t\t\ttime: ok,\n  \t\t\tsame_day_time: sameday\n  \t\t}\n  \t});\n  }\n\n  onPhoneChange = e => {\n  \tconst ok = validator.isMobilePhone(e.target.value, 'en-US');\n\t\tthis.setState({\n\t\t\t...this.state,\n\t\t\tdata: {\n\t\t\t\t...this.state.data,\n\t\t\t\tphone: e.target.value\n\t\t\t},\n\t\t\tvalidation: {\n\t\t\t\t...this.state.validation,\n\t\t\t\tphone: ok\n\t\t\t}\n\t\t});\n  }\n\n  onStateChange = e => {\n  \tconst ok = states.includes(e.target.value.toUpperCase());\n\t\tthis.setState({\n\t\t\t...this.state,\n\t\t\tdata: {\n\t\t\t\t...this.state.data,\n\t\t\t\tstate: e.target.value\n\t\t\t},\n\t\t\tvalidation: {\n\t\t\t\t...this.state.validation,\n\t\t\t\tstate: ok\n\t\t\t}\n\t\t});\n  }\n\n  handleJobChange = value => {\n  \tthis.setState({\n  \t\t...this.state,\n  \t\tdata: {\n  \t\t\t...this.state.data,\n  \t\t\ttype: empty(value) ? null : value.value\n  \t\t},\n  \t\tselectedType: value\n  \t});\n  }\n\n  checkEmpties = () => {\n  \tlet arr = [];\n  \tconst {data} = this.state;\n  \tfor (var key in data) {\n\t    if (empty(data[key])) {\n\t      arr.push(key);\n\t    }\n\t\t}\n\t\tif(empty(arr)) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\tthis.setState({\n\t\t\t\t...this.state,\n\t\t\t\tempties: arr\n\t\t\t});\n\t\t\treturn false;\n\t\t}\n  }\n\n  onSubmit = async e => {\n  \te.preventDefault();\n  \tawait this.setState({\n  \t\t...this.state,\n  \t\tempties: [],\n  \t\tloaded: false\n  \t});\n  \tconst empties = await this.checkEmpties();\n  \tif(empties && checkTrue(this.state.validation)) {\n  \t\tconst resp = await this.props.db_add_job(this.state.data);\n  \t\tresp.complete ? this.props.history.push('/app/dashboard/manage') : console.log(resp.message);\n  \t}\n  \tthis.setState({\n  \t\t...this.state,\n  \t\tdate: this.state.date,\n  \t\ttype: this.state.type,\n  \t\tloaded: true\n  \t});\n  }\n\n\trender() {\n\t\tconst {data, validation, empties, selectedType, needsPayment, noworkers, needCard, cardLoading} = this.state;\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<Navbar active=\"book\"/>\n\t\t\t\t{!this.state.loaded && (<Loading />)}\n\t\t\t\t{this.state.cardLoading && (<Loading />)}\n\t\t\t\t{!empty(this.state.success) && (<ErrorBanner style={{background: \"green\"}} error={this.state.success} onHide={() => this.setState({...this.state, success: ''})}/>)}\n\t\t\t\t{!empty(this.state.error) && (<ErrorBanner error={this.state.error} onHide={() => this.setState({...this.state, error: ''})}/>)}\n\t\t\t\t{this.state.loaded && (<Fragment>\n\t\t\t\t\t{!noworkers && empty(needsPayment) && !needCard && (<div className=\"sign-in-container no-back\">\n\t\t\t\t\t\t<div className=\"book-box-img\">\n\t\t\t\t\t\t\t<img className=\"book-header-img\" src={flowers} alt=\"\"/>\n\t\t\t\t\t\t\t<div className=\"book-title-div\"><span className=\"book-title\">BOOK A JOB</span></div>\n\t\t\t\t\t\t\t<div className=\"sign-up-box\" style={{width: \"100%\", margin: \"0\", borderRadius: \"0px\", boxShadow: \"none\", paddingTop: \"1rem\"}}>\n\t\t\t\t\t\t\t\t<div className=\"input-horiz-container\">\n\t\t\t\t\t\t\t\t\t<div className=\"input-side-container\" style={{width: this.state.small ? \"100%\" : \"38%\", flexDirection: \"column\", justifyContent: \"flex-start\"}}>\n\t\t\t\t\t\t\t\t\t\t<span className=\"book-subtitle\">Customer Info</span>\n\t\t\t\t\t\t\t\t\t\t<div className=\"input-side\" style={{width: \"100%\"}}>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"input-group\">\n\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"field-label\">Phone</span>\n\t\t\t\t\t\t\t\t\t\t\t\t{!validation.phone && (<span className=\"form-error\">Enter a valid phone number.</span>)}\n\t\t\t\t\t\t\t\t\t\t\t\t<input type=\"text\" className=\"text-field\" id=\"phone\" onChange={this.onPhoneChange} value={data.phone}/>\n\t\t\t\t\t\t\t\t\t\t\t\t{empties.includes(\"phone\") && (<span className=\"form-error\">You must enter a phone number.</span>)}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<AddressBlock onChange={this.onChange} onStateChange={this.onStateChange} state={this.state}/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t{this.state.small && (<br/>)}\n\t\t\t\t\t\t\t\t\t<div className=\"input-side-container\" style={{width: this.state.small ? \"100%\" : \"58%\"}}>\n\t\t\t\t\t\t\t\t\t\t<span className=\"book-subtitle\">Job Info</span>\n\t\t\t\t\t\t\t\t\t\t<div className=\"input-side\">\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"input-group\">\n\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"field-label\">Date</span>\n\t\t\t\t\t\t\t\t\t\t\t\t{!validation.date && (<span className=\"form-error\">You cannot select a date in the past.</span>)}\n\t\t\t\t\t\t\t\t\t\t\t\t<DatePicker onChange={this.handleDateChange} value={empty(data.date) ? null : data.date}/>\n\t\t\t\t\t\t\t\t\t\t\t\t{empties.includes(\"date\") && (<span className=\"form-error\">You must enter a date.</span>)}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"input-group\">\n\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"field-label\">Time <span style={{fontSize: \"0.6rem\"}}>(M-F 3-8pm, Sat-Sun 8am-8pm)</span></span>\n\t\t\t\t\t\t\t\t\t\t\t\t{!validation.same_day_time && (<span className=\"form-error\">You cannot book a job in the past.</span>)}\n\t\t\t\t\t\t\t\t\t\t\t\t{!validation.time && (<span className=\"form-error\">Select a time compliant with (M-F 3-8pm, Sat-Sun 8am-8pm).</span>)}\n\t\t\t\t\t\t\t\t\t\t\t\t<TimePick onChange={this.handleTimeChange} value={empty(data.time) ? null : moment.utc().startOf('day').add(data.time, 'minutes')}/>\n\t\t\t\t\t\t\t\t\t\t\t\t{empties.includes(\"time\") && (<span className=\"form-error\">You must enter a time.</span>)}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"input-side\">\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"input-group\">\n\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"field-label\">Estimated Hours</span>\n\t\t\t\t\t\t\t\t\t\t\t\t<input min=\"0\" type=\"number\" className=\"text-field\" id=\"hours\" onChange={this.onChange} value={data.hours}/>\n\t\t\t\t\t\t\t\t\t\t\t\t{empties.includes(\"hours\") && (<span className=\"form-error\">You must enter estimated hours.</span>)}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"input-group\">\n\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"field-label\">Workers (1-4)</span>\n\t\t\t\t\t\t\t\t\t\t\t\t<input pattern=\"[0-9]\" type=\"number\" step=\"1\" min=\"1\" max=\"4\" className=\"text-field\" id=\"workers\" onChange={this.onNumChange} value={data.workers}/>\n\t\t\t\t\t\t\t\t\t\t\t\t{empties.includes(\"workers\") && (<span className=\"form-error\">You must enter the number of workers you need.</span>)}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"input-side horiz-flex\">\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"input-group\">\n\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"field-label\">Job Type</span>\n\t\t\t\t\t\t\t\t\t\t\t\t<Dropdown options={jobtypes} onChange={this.handleJobChange} value={selectedType}/>\n\t\t\t\t\t\t\t\t\t\t\t\t{empties.includes(\"type\") && (<span className=\"form-error\">You must enter a job type.</span>)}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"input-group\" style={{fontSize: \"0.7rem\", color: \"#3f6bb4\"}}>\n\t\t\t\t\t\t\t\t\t\t\t\tNOTE: The following jobs are not offered: \n\t\t\t\t\t\t\t\t\t\t\t\tElectrical Work, Plumbing, Painting, and Carpentry.\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"input-group bottom-form\">\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"field-label\" style={{marginBottom: \"0\"}}>Description</span>\n\t\t\t\t\t\t\t\t\t\t\t<span style={{fontSize: \"0.8rem\", marginBottom: \"0.3rem\"}}>Tell us about your job.</span>\n\t\t\t\t\t\t\t\t\t\t\t<textarea type=\"text\" className=\"description-field\" id=\"description\" onChange={this.onChange} value={data.description}/>\n\t\t\t\t\t\t\t\t\t\t\t{empties.includes(\"description\") && (<span className=\"form-error\">You must enter a description.</span>)}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"bottom-form\" style={{fontWeight: \"500\", fontSize: \"1.2rem\", width: \"100%\", marginTop: \"0.5rem\"}}>\n\t\t\t\t\t\t\t\t\t<div className=\"customer-info-text estimate\"><span ><strong>ESTIMATED COST:</strong></span> <CostEstimate job={data}/></div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{data.same_day && (<div className=\"bottom-form\" style={{fontSize: \"1rem\", width: \"100%\", marginTop: \"0.25rem\", color: \"red\"}}>\n\t\t\t\t\t\t\t\t\t<span>WARNING: </span>\n\t\t\t\t\t\t\t\t\t<span>Because you are booking a job to be completed today, it is less likely that your job will be fulfilled.</span>\n\t\t\t\t\t\t\t\t</div>)}\n\t\t\t\t\t\t\t\t<button className=\"sign-in-btn bottom-form\" type=\"submit\" onClick={this.props.auth.user.card ? this.onSubmit : () => this.setState({...this.state, needCard: true})} disabled={!this.state.loaded}>Confirm</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>)}\n\t\t\t\t\t{needCard && (\n\t\t\t\t\t\t<div className=\"sign-in-container no-card\" style={cardLoading ? {opacity: 0} : {}}>\n\t\t\t\t\t\t\t<div className=\"sign-up-box\" style={{width: \"50rem\", borderRadius: \"0px\", marginTop: \"0\"}}>\n\t\t\t\t\t\t\t\t<span className=\"sign-in-title\">Before you continue...</span>\n\t\t\t\t\t\t\t\t<div style={{textAlign: \"left\", fontSize: \"1rem\"}}>\n\t\t\t\t\t\t\t\t\t<span style={{fontSize: \"1.1rem\"}}>There needs to be a credit card on file in order to finish booking your job. Don't worry, you wont be charged until the job is complete.</span>\n\t\t\t\t\t\t\t\t\t<br/><br/>\n\t\t\t\t\t\t\t\t\t<span style={{fontSize: \"1.1rem\"}}>Why do I need to add a Credit Card?: </span>\n\t\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t\t<li><strong>Seamless Security:</strong> Allows us to verify your account</li>\n\t\t\t\t\t\t\t\t\t\t<li><strong>Simplified Payment:</strong> Pay and sign at the job site without having to use cash</li>\n\t\t\t\t\t\t\t\t\t\t<li><strong>Not Home? No Problem:</strong> Allows for an invoice to be sent if you aren't home</li>\n\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<img className=\"stripe-powered-img\" src={powered} alt=\"\" style={{alignSelf: \"flex-start\"}}/>\n\t\t\t\t\t\t\t\t<PaymentInfo user={this.props.auth.user} onCancel={() => {this.setState({...this.state, loaded: true, cardLoading: false, needCard: false, success: \"Your card has been successfully linked to your profile.\"})}} onLoading={() => {this.setState({...this.state, cardLoading: true})}} onError={(err) => {this.setState({...this.state, error: err, loaded: true})}}/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t{!empty(needsPayment) && (\n\t\t\t\t\t\t<div className=\"sign-in-container no-card\">\n\t\t\t\t\t\t\t<div className=\"sign-up-box\" style={{width: \"50rem\", borderRadius: \"0px\", marginTop: \"0\"}}>\n\t\t\t\t\t\t\t\t<span className=\"sign-in-title\">Before you continue...</span>\n\t\t\t\t\t\t\t\t<div style={{textAlign: \"left\", fontSize: \"1rem\"}}>\n\t\t\t\t\t\t\t\t\t<span style={{fontSize: \"1.1rem\"}}>You have an outstanding payment that you need to complete. Click the link below to pay for the job.</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<a className=\"book-now-btn\" href={needsPayment.invoice_url} style={{marginTop: \"1rem\"}} target=\"_blank\">PAY FOR JOB</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t{noworkers && (\n\t\t\t\t\t\t<div className=\"sign-in-container no-card\">\n\t\t\t\t\t\t\t<div className=\"sign-up-box\" style={{width: \"50rem\", borderRadius: \"0px\", marginTop: \"0\"}}>\n\t\t\t\t\t\t\t\t<span className=\"sign-in-title\">No workers in the area :(</span>\n\t\t\t\t\t\t\t\t<div style={{textAlign: \"left\", fontSize: \"1rem\"}}>\n\t\t\t\t\t\t\t\t\t<span style={{fontSize: \"1.1rem\"}}>Unfortunately, there are no workers signed up in your immediate vicinity. Therefore, we cannot let you book a job because there will be no workers to accept it. We look forward to serving you soon!</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</Fragment>)}\n\t\t\t</Fragment>\n\t\t)\n\t}\n}\n\nconst mapStateToProps = state => ({\n  auth: state.auth\n});\n\nexport default connect(mapStateToProps,{db_add_job})(withRouter(Book));\n"]},"metadata":{},"sourceType":"module"}