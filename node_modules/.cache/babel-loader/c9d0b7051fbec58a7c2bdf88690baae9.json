{"ast":null,"code":"import _objectSpread from \"/Users/jackjoliet/Documents/marketplace/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport { SET_CURRENT_USER, UPDATE_CURRENT_USER } from \"../types\";\nimport { apiCall } from '../../services/api';\nexport const state_get_worker = payload => ({\n  type: SET_CURRENT_USER,\n  payload\n});\nexport const state_update_worker = payload => ({\n  type: UPDATE_CURRENT_USER,\n  payload: _objectSpread({}, payload, {\n    db: \"workers\"\n  })\n});\nexport const db_get_worker = user => dispatch => {\n  return apiCall('get', `/api/workers/${user.id}`).then(function (res) {\n    dispatch(state_get_worker(_objectSpread({}, user, {}, res[0])));\n    return {\n      complete: true\n    };\n  }).catch(function (err) {\n    return {\n      complete: false,\n      message: err\n    };\n  });\n};\nexport const db_get_workers_by_loc = data => {\n  return apiCall('post', `/api/workers/customer/loc`, data).then(function (res) {\n    return {\n      complete: true,\n      count: res[0].count\n    };\n  }).catch(function (error) {\n    return {\n      complete: false,\n      message: error.data.error\n    };\n  });\n};\nexport const db_verify_stripe = data => {\n  return apiCall('post', `/api/workers/stripe`, data).then(function (res) {\n    return {\n      complete: true,\n      confirmed: res.confirmed\n    };\n  }).catch(function (error) {\n    return {\n      complete: false,\n      message: error.data.error\n    };\n  });\n};\nexport const db_update_basic_info = worker => dispatch => {\n  return apiCall('put', `/api/workers/${worker.id}`, worker).then(function (res) {\n    dispatch(state_update_worker(res[0]));\n    return {\n      complete: true\n    };\n  }).catch(function (error) {\n    console.log(error);\n    return {\n      complete: false,\n      message: error.data.error\n    };\n  });\n};\nexport const db_change_password = worker => dispatch => {\n  return apiCall('put', `/api/workers/password/${worker.id}`, worker).then(function (res) {\n    dispatch(state_update_worker(res[0]));\n    return {\n      complete: true\n    };\n  }).catch(function (error) {\n    return {\n      complete: false,\n      message: error.data.error\n    };\n  });\n};\nexport const db_forgot_password = worker => dispatch => {\n  return apiCall('post', `/api/reset/worker`, worker).then(function (res) {\n    return {\n      complete: true\n    };\n  }).catch(function (error) {\n    return {\n      complete: false,\n      message: error.data.error\n    };\n  });\n};","map":{"version":3,"sources":["/Users/jackjoliet/Documents/marketplace/front/src/store/actions/workers.js"],"names":["SET_CURRENT_USER","UPDATE_CURRENT_USER","apiCall","state_get_worker","payload","type","state_update_worker","db","db_get_worker","user","dispatch","id","then","res","complete","catch","err","message","db_get_workers_by_loc","data","count","error","db_verify_stripe","confirmed","db_update_basic_info","worker","console","log","db_change_password","db_forgot_password"],"mappings":"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","sourcesContent":["import {SET_CURRENT_USER, UPDATE_CURRENT_USER} from \"../types\";\nimport {apiCall} from '../../services/api';\n\nexport const state_get_worker = payload => ({\n\ttype: SET_CURRENT_USER,\n\tpayload\n});\n\nexport const state_update_worker = payload => ({\n\ttype: UPDATE_CURRENT_USER,\n\tpayload: {...payload, db: \"workers\"}\n});\n\nexport const db_get_worker = user => dispatch => {\n\treturn apiCall('get', `/api/workers/${user.id}`)\n\t.then(function(res) {\n\t\tdispatch(state_get_worker({...user, ...res[0]}));\n\t\treturn {complete: true};\n\t})\n\t.catch(function(err) {\n\t\treturn {complete: false, message: err};\n\t});\n}\n\nexport const db_get_workers_by_loc = data => {\n\treturn apiCall('post', `/api/workers/customer/loc`, data)\n\t.then(function(res) {\n\t\treturn {complete: true, count: res[0].count};\n\t})\n\t.catch(function(error) {\n\t\treturn {complete: false, message: error.data.error};\n\t});\n}\n\nexport const db_verify_stripe = data => {\n\treturn apiCall('post', `/api/workers/stripe`, data)\n\t.then(function(res) {\n\t\treturn {complete: true, confirmed: res.confirmed};\n\t})\n\t.catch(function(error) {\n\t\treturn {complete: false, message: error.data.error};\n\t});\n}\n\nexport const db_update_basic_info = worker => dispatch => {\n\treturn apiCall('put', `/api/workers/${worker.id}`, worker)\n\t.then(function(res) {\n\t\tdispatch(state_update_worker(res[0]));\n\t\treturn {complete: true};\n\t})\n\t.catch(function(error) {\n\t\tconsole.log(error);\n\t\treturn {complete: false, message: error.data.error};\n\t});\n}\n\nexport const db_change_password = worker => dispatch => {\n\treturn apiCall('put', `/api/workers/password/${worker.id}`, worker)\n\t.then(function(res) {\n\t\tdispatch(state_update_worker(res[0]));\n\t\treturn {complete: true};\n\t})\n\t.catch(function(error) {\n\t\treturn {complete: false, message: error.data.error};\n\t});\n}\n\nexport const db_forgot_password = worker => dispatch => {\n\treturn apiCall('post', `/api/reset/worker`, worker)\n\t.then(function(res) {\n\t\treturn {complete: true};\n\t})\n\t.catch(function(error) {\n\t\treturn {complete: false, message: error.data.error};\n\t});\n}"]},"metadata":{},"sourceType":"module"}